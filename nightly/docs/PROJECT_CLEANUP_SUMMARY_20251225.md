# é¡¹ç›®æ¸…ç†æ–¹æ¡ˆæ‘˜è¦

**åˆ›å»ºæ—¶é—´**: 2025-12-25
**é¡¹ç›®ç‰ˆæœ¬**: v4.8.0

---

## ğŸ“Š æ¸…ç†ç»Ÿè®¡

| ç±»åˆ« | æ–‡ä»¶æ•° | ç©ºé—´èŠ‚çœ | æ“ä½œ |
|------|--------|---------|------|
| è¿‡æ—¶æ•°æ®æ–‡ä»¶ | 2 | ~240KB | å½’æ¡£ |
| æ—§å¤‡ä»½æ–‡ä»¶ | 4 | ~1.1MB | åˆ é™¤ |
| ä¸­é—´å¤„ç†æ–‡ä»¶ | 19 | ~1MB | åˆ é™¤ |
| å¤‡ä»½ç›®å½• | 1 | ~2MB | å‹ç¼©ååˆ é™¤ |
| æµ‹è¯•æ–‡ä»¶ | 3 | ~50KB | å½’æ¡£ |
| é”™ä½æ–‡ä»¶ | 2 | - | ç§»åŠ¨ |
| **æ€»è®¡** | **31** | **~4.4MB** | **-** |

---

## ğŸ¯ ä¸»è¦æ¸…ç†é¡¹ç›®

### 1. å½’æ¡£è¿‡æ—¶æ•°æ®æ–‡ä»¶ âœ… å¯é€†
- `results/summary_new.csv` (266è¡Œ) â†’ `results/archived/merged_20251212/`
- `results/summary_old.csv` (212è¡Œ) â†’ `results/archived/merged_20251212/`
- **åŸå› **: å·²åˆå¹¶åˆ° `raw_data.csv`

### 2. æ¸…ç†æ—§å¤‡ä»½æ–‡ä»¶ âš ï¸ ä¸å¯é€†
- `raw_data.backup_20251221_215643.csv` â†’ åˆ é™¤
- `raw_data.csv.backup_before_clean` â†’ åˆ é™¤
- `data.csv.backup_before_column_removal_*` â†’ åˆ é™¤
- `data.csv.backup_before_merge_*` â†’ åˆ é™¤
- **ä¿ç•™**: æœ€æ–°å¤‡ä»½ (20251223)

### 3. æ¸…ç†Analysisä¸­é—´æ–‡ä»¶ âš ï¸ ä¸å¯é€†
- `analysis/data/energy_research/processed/stage*.csv` (19ä¸ª) â†’ åˆ é™¤
- `analysis/data/energy_research/processed.backup_4groups_20251224/` â†’ å‹ç¼©ååˆ é™¤
- **ä¿ç•™**: `training/` ç›®å½•ä¸‹çš„æœ€ç»ˆè®­ç»ƒæ•°æ®

### 4. å½’æ¡£å®Œæˆçš„æµ‹è¯• âœ… å¯é€†
- `tests/test_old_csv_rebuild.py` â†’ `tests/archived/completed_20251212/`
- `tests/validate_80col_format.py` â†’ `tests/archived/completed_20251212/`
- `tests/validate_rebuilt_summary_old.py` â†’ `tests/archived/completed_20251212/`

### 5. ç§»åŠ¨é”™ä½æ–‡ä»¶ âœ… å¯é€†
- `analysis/scripts/data/` â†’ `analysis/data/energy_research/raw/`

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1: ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd /home/green/energy_dl/nightly

# 1. æŸ¥çœ‹å°†æ‰§è¡Œçš„æ“ä½œï¼ˆå®‰å…¨ï¼‰
python3 scripts/execute_cleanup_plan.py --dry-run

# 2. ä»…æ‰§è¡ŒéªŒè¯
python3 scripts/execute_cleanup_plan.py --verify-only

# 3. æ‰§è¡ŒPhase 1ï¼ˆå®‰å…¨å½’æ¡£ï¼Œå¯é€†ï¼‰
python3 scripts/execute_cleanup_plan.py --phase 1

# 4. æ‰§è¡ŒPhase 2ï¼ˆæ¸…ç†å¤‡ä»½ï¼Œä¸å¯é€†ï¼‰
python3 scripts/execute_cleanup_plan.py --phase 2

# 5. æ‰§è¡ŒPhase 3ï¼ˆæ¸…ç†ä¸­é—´æ–‡ä»¶ï¼Œä¸å¯é€†ï¼‰
python3 scripts/execute_cleanup_plan.py --phase 3

# 6. æ‰§è¡Œæ‰€æœ‰é˜¶æ®µï¼ˆéœ€ç¡®è®¤ï¼‰
python3 scripts/execute_cleanup_plan.py --all
```

### æ–¹å¼2: æ‰‹åŠ¨æ‰§è¡Œï¼ˆé€‚åˆè‡ªå®šä¹‰ï¼‰

å‚è€ƒè¯¦ç»†æ–‡æ¡£: `docs/PROJECT_CLEANUP_PLAN_20251225.md`

---

## âœ… æ‰§è¡Œå‰æ£€æŸ¥

è„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

1. âœ… ä¸»æ•°æ®æ–‡ä»¶å­˜åœ¨ (`raw_data.csv`, `data.csv`)
2. âœ… æœ€æ–°å¤‡ä»½å­˜åœ¨ (20251223å¤‡ä»½)
3. âœ… Trainingæ•°æ®å®Œæ•´ (4ä¸ªè®­ç»ƒæ•°æ®æ–‡ä»¶)
4. âœ… è‡ªåŠ¨åˆ›å»ºå®Œæ•´å¤‡ä»½ (`nightly_backup_before_cleanup_*.tar.gz`)

---

## ğŸ“‹ æ‰§è¡Œæµç¨‹

```
1. æ‰§è¡Œå‰éªŒè¯
   â”œâ”€ æ£€æŸ¥ä¸»æ•°æ®æ–‡ä»¶
   â”œâ”€ æ£€æŸ¥æœ€æ–°å¤‡ä»½
   â””â”€ æ£€æŸ¥trainingæ•°æ®
   â†“
2. åˆ›å»ºå®Œæ•´å¤‡ä»½
   â”œâ”€ å‹ç¼©æ•´ä¸ªnightlyç›®å½•
   â””â”€ ä¿å­˜åˆ°ä¸Šçº§ç›®å½•
   â†“
3. ç”¨æˆ·ç¡®è®¤
   â”œâ”€ æ˜¾ç¤ºå³å°†æ‰§è¡Œçš„æ“ä½œ
   â””â”€ ç­‰å¾…ç”¨æˆ·è¾“å…¥ "yes"
   â†“
4. æ‰§è¡Œæ¸…ç†
   â”œâ”€ Phase 1: å®‰å…¨å½’æ¡£
   â”œâ”€ Phase 2: æ¸…ç†å¤‡ä»½
   â””â”€ Phase 3: æ¸…ç†ä¸­é—´æ–‡ä»¶
   â†“
5. ç”ŸæˆæŠ¥å‘Š
   â””â”€ docs/PROJECT_CLEANUP_EXECUTION_REPORT_*.md
```

---

## ğŸ”’ å®‰å…¨æªæ–½

1. **Dry-Runæ¨¡å¼**: é»˜è®¤æ¨¡æ‹Ÿæ‰§è¡Œï¼Œä¸å®é™…ä¿®æ”¹æ–‡ä»¶
2. **å®Œæ•´å¤‡ä»½**: æ‰§è¡Œå‰è‡ªåŠ¨åˆ›å»ºtar.gzå¤‡ä»½
3. **åˆ†é˜¶æ®µæ‰§è¡Œ**: å¯å•ç‹¬æ‰§è¡Œå„é˜¶æ®µï¼Œçµæ´»æ§åˆ¶
4. **éªŒè¯æœºåˆ¶**: æ‰§è¡Œå‰è‡ªåŠ¨éªŒè¯æ•°æ®å®Œæ•´æ€§
5. **å½’æ¡£è€Œéåˆ é™¤**: é‡è¦æ–‡ä»¶å½’æ¡£ä¿ç•™ï¼Œå¯è¿½æº¯

---

## ğŸ“‚ æ¸…ç†åçš„æ–‡ä»¶ç»“æ„

```
energy_dl/nightly/
â”œâ”€â”€ results/
â”‚   â”œâ”€â”€ raw_data.csv âœ… (727è¡Œ, 87åˆ—)
â”‚   â”œâ”€â”€ data.csv âœ… (727è¡Œ, 56åˆ—)
â”‚   â”œâ”€â”€ raw_data.csv.backup_20251223_195253 âœ…
â”‚   â”œâ”€â”€ data.csv.backup_20251223_202113 âœ…
â”‚   â””â”€â”€ archived/
â”‚       â””â”€â”€ merged_20251212/ (summary_new.csv, summary_old.csv)
â”‚
â”œâ”€â”€ analysis/
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ energy_research/
â”‚   â”‚       â”œâ”€â”€ raw/ (åŒ…å«extractedæ–‡ä»¶)
â”‚   â”‚       â”œâ”€â”€ training/ (4ä¸ªæœ€ç»ˆè®­ç»ƒæ•°æ®) âœ…
â”‚   â”‚       â””â”€â”€ processed.backup_4groups_20251224.tar.gz
â”‚   â””â”€â”€ scripts/
â”‚       â””â”€â”€ (æ— dataç›®å½•)
â”‚
â””â”€â”€ tests/
    â”œâ”€â”€ *.py (14ä¸ªæ´»è·ƒæµ‹è¯•)
    â””â”€â”€ archived/
        â””â”€â”€ completed_20251212/ (3ä¸ªå·²å®Œæˆæµ‹è¯•)
```

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

### æ¸…ç†å‰
- **æ–‡ä»¶æ•°**: ~90ä¸ªæ•°æ®ç›¸å…³æ–‡ä»¶
- **æ€»å¤§å°**: ~6.5MB
- **å¤‡ä»½æ–‡ä»¶**: 9ä¸ª
- **ä¸­é—´æ–‡ä»¶**: 19ä¸ª

### æ¸…ç†å
- **æ–‡ä»¶æ•°**: ~59ä¸ªï¼ˆå‡å°‘31ä¸ªï¼‰
- **æ€»å¤§å°**: ~2.1MBï¼ˆèŠ‚çœ4.4MBï¼‰
- **å¤‡ä»½æ–‡ä»¶**: 2ä¸ªï¼ˆæœ€æ–°çš„ï¼‰
- **ä¸­é—´æ–‡ä»¶**: 0ä¸ªï¼ˆå·²æ¸…ç†ï¼‰

### æ”¹è¿›
- âœ… æ–‡ä»¶ç»“æ„æ›´æ¸…æ™°
- âœ… æ•°æ®ä½ç½®æ›´è§„èŒƒ
- âœ… å†å²æ–‡ä»¶å¯è¿½æº¯
- âœ… ç»´æŠ¤æ€§æ›´å¼º

---

## ğŸ“ æ‰§è¡ŒåéªŒè¯

```bash
# 1. éªŒè¯ä¸»æ•°æ®æ–‡ä»¶
python3 scripts/validate_raw_data.py

# 2. éªŒè¯trainingæ•°æ®
cd analysis
python3 -c "
import pandas as pd
for task in ['bug_localization', 'image_classification', 'person_reid', 'vulberta']:
    df = pd.read_csv(f'data/energy_research/training/training_data_{task}.csv')
    print(f'{task}: {len(df)} rows')
"

# 3. éªŒè¯è„šæœ¬åŠŸèƒ½
cd ..
python3 scripts/calculate_experiment_gap.py
python3 -m pytest tests/verify_csv_append_fix.py -v
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **è¯¦ç»†æ¸…ç†è®¡åˆ’**: [docs/PROJECT_CLEANUP_PLAN_20251225.md](PROJECT_CLEANUP_PLAN_20251225.md)
- **æ¸…ç†è„šæœ¬**: [scripts/execute_cleanup_plan.py](../scripts/execute_cleanup_plan.py)
- **é¡¹ç›®æŒ‡å—**: [CLAUDE.md](../CLAUDE.md)

---

## âš ï¸ é‡è¦æç¤º

1. **å»ºè®®æ‰§è¡Œé¡ºåº**: Phase 1 â†’ éªŒè¯ â†’ Phase 2 â†’ éªŒè¯ â†’ Phase 3 â†’ éªŒè¯
2. **å¯ä»¥ä¸­é€”åœæ­¢**: æ¯ä¸ªPhaseç‹¬ç«‹æ‰§è¡Œï¼Œå¯éšæ—¶åœæ­¢
3. **å¤‡ä»½æ¢å¤**: å¦‚æœå‡ºç°é—®é¢˜ï¼Œä½¿ç”¨è‡ªåŠ¨åˆ›å»ºçš„tar.gzå¤‡ä»½æ¢å¤
4. **æµ‹è¯•ç¯å¢ƒ**: å»ºè®®å…ˆåœ¨æµ‹è¯•åˆ†æ”¯æ‰§è¡Œï¼Œç¡®è®¤æ— è¯¯åå†åœ¨ä¸»åˆ†æ”¯æ‰§è¡Œ

---

## ğŸ™‹ å¸¸è§é—®é¢˜

### Q1: Dry-Runæ¨¡å¼ä¼šä¿®æ”¹æ–‡ä»¶å—ï¼Ÿ
**A**: ä¸ä¼šã€‚Dry-Runæ¨¡å¼ä»…æ˜¾ç¤ºå°†æ‰§è¡Œçš„æ“ä½œï¼Œä¸ä¼šå®é™…ä¿®æ”¹ä»»ä½•æ–‡ä»¶ã€‚

### Q2: å¦‚æœæ¸…ç†åå‘ç°é—®é¢˜æ€ä¹ˆåŠï¼Ÿ
**A**: ä½¿ç”¨æ‰§è¡Œå‰è‡ªåŠ¨åˆ›å»ºçš„å®Œæ•´å¤‡ä»½æ¢å¤ï¼š
```bash
cd /home/green/energy_dl
tar -xzf nightly_backup_before_cleanup_*.tar.gz
```

### Q3: å¯ä»¥åªæ‰§è¡Œéƒ¨åˆ†æ¸…ç†å—ï¼Ÿ
**A**: å¯ä»¥ã€‚ä½¿ç”¨ `--phase N` å‚æ•°å•ç‹¬æ‰§è¡Œå„é˜¶æ®µã€‚

### Q4: å½’æ¡£çš„æ–‡ä»¶è¿˜èƒ½æ‰¾å›å—ï¼Ÿ
**A**: å¯ä»¥ã€‚å½’æ¡£æ–‡ä»¶ä¿å­˜åœ¨ `archived/` ç›®å½•ä¸‹ï¼Œéšæ—¶å¯ä»¥æ¢å¤ã€‚

### Q5: æ¸…ç†ä¼šå½±å“æ­£åœ¨è¿è¡Œçš„å®éªŒå—ï¼Ÿ
**A**: ä¸ä¼šã€‚æ¸…ç†ä»…é’ˆå¯¹è¿‡æ—¶/é‡å¤æ–‡ä»¶ï¼Œä¸å½±å“ä¸»æ•°æ®æ–‡ä»¶å’Œè¿è¡Œä¸­çš„å®éªŒã€‚

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œå‚è€ƒ:
- è¯¦ç»†è®¡åˆ’: `docs/PROJECT_CLEANUP_PLAN_20251225.md`
- è„šæœ¬æºç : `scripts/execute_cleanup_plan.py`
- é¡¹ç›®æŒ‡å—: `CLAUDE.md`

---

**åˆ›å»ºæ—¶é—´**: 2025-12-25
**çŠ¶æ€**: å¾…æ‰§è¡Œ
**å»ºè®®**: å…ˆæ‰§è¡Œ `--dry-run` æŸ¥çœ‹æ•ˆæœï¼Œç¡®è®¤æ— è¯¯ååˆ†é˜¶æ®µæ‰§è¡Œ
