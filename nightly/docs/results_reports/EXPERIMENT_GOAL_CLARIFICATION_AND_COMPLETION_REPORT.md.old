# 实验目标澄清与完成度评估报告

**日期**: 2025-12-12
**版本**: v4.7.3
**报告类型**: 实验目标重新定义与进度评估

---

## 📋 执行摘要

### 关键发现

🔴 **当前完成度**: **0.0%** (0/90组合完全达标)
✅ **部分完成**: 73.3% (66/90组合部分数据)
❌ **完全缺失**: 26.7% (24/90组合无数据)

### 需补齐实验数量

**总计**: **330个实验**
- 默认值实验: 90个
- 变异实验: 240个

### 主要问题

1. **性能数据缺失**: 128个实验缺少性能指标（26.9%）
   - 主要影响: examples/mnist_ff (56), VulBERTa/mlp (32), bug-localization (30), MRT-OAST (10)
2. **缺少默认值实验**: 所有90个组合都缺少默认值实验（100%）
3. **多参数变异实验**: 26个实验同时变异多个参数（需要重新运行单参数版本）
   - 4个参数变异: 18个
   - 5个参数变异: 8个

---

## 🎯 实验目标澄清

### 实验目标定义（重新澄清）

对于**45个超参数**，在**两种运行场景**（并行/非并行）下，都需要：

#### 1. 默认值实验
- **数量**: 每个超参数-模式组合1个
- **要求**: 不调用变异脚本，使用默认超参数值
- **目的**: 建立性能和能耗基线

#### 2. 单参数变异实验
- **数量**: 每个超参数-模式组合5个**唯一值**
- **要求**:
  - ✅ 每次实验**仅变异1个超参数**
  - ✅ 5次实验的超参数值**各不相同**（唯一性）
  - ❌ 不允许同时变异多个超参数
- **目的**: 研究单个超参数对能耗和性能的独立影响

#### 3. 数据完整性要求
- **能耗数据**: CPU和GPU能耗数据必须完整
- **性能数据**: accuracy和mAP至少有一个非空
- **训练状态**: 训练必须成功完成

### 总实验目标

```
总组合数 = 45个超参数 × 2种模式 = 90个组合
每个组合需要 = 1个默认值 + 5个变异 = 6个实验
总实验数 = 90 × 6 = 540个实验
```

---

## 📊 当前状态分析

### 数据源

- **文件**: `results/raw_data.csv`
- **总实验数**: 476个
- **有效实验数**: 212个（44.5%）
- **无效实验数**: 264个（55.5%）

### 完成度统计

| 状态 | 组合数 | 百分比 | 说明 |
|------|--------|--------|------|
| **完全完成** | 0 | 0.0% | 有1个默认值 + 5个唯一变异 |
| **部分完成** | 34 | 37.8% | 有部分默认值或变异数据 |
| **完全缺失** | 56 | 62.2% | 完全没有有效数据 |
| **总计** | 90 | 100% | 所有组合 |

### 无效实验分析

**总无效实验**: 264个（占总实验的55.5%）

**无效原因分布**:

| 原因 | 数量 | 百分比 | 说明 |
|------|------|--------|------|
| 性能数据缺失 | 247 | 93.6% | 缺少accuracy或mAP |
| 多参数变异（4个） | 9 | 3.4% | 同时变异4个参数 |
| 多参数变异（5个） | 8 | 3.0% | 同时变异5个参数 |
| **总计** | 264 | 100% | |

---

## 🔍 详细缺失分析

### 按模型分类

#### 1. 完全缺失模型（56个组合）

这些模型-参数-模式组合**完全没有有效数据**：

**examples/mnist** (8个组合):
- 非并行: batch_size, epochs, learning_rate, seed（4个参数 × 1个模式 = 4个）
- 并行: batch_size, epochs, learning_rate, seed（4个参数 × 1个模式 = 4个）

**examples/mnist_rnn** (8个组合):
- 非并行: batch_size, epochs, learning_rate, seed（4个）
- 并行: batch_size, epochs, learning_rate, seed（4个）

**examples/mnist_ff** (8个组合):
- 非并行: batch_size, epochs, learning_rate, seed（4个）
- 并行: batch_size, epochs, learning_rate, seed（4个）

**examples/siamese** (8个组合):
- 非并行: batch_size, epochs, learning_rate, seed（4个）
- 并行: batch_size, epochs, learning_rate, seed（4个）

**VulBERTa/mlp** (8个组合):
- 非并行: epochs, learning_rate, seed, weight_decay（4个）
- 并行: epochs, learning_rate, seed, weight_decay（4个）

**pytorch_resnet_cifar10/resnet20** (8个组合):
- 非并行: epochs, learning_rate, seed, weight_decay（4个）
- 并行: epochs, learning_rate, seed, weight_decay（4个）

**bug-localization-by-dnn-and-rvsm/default** (8个组合):
- 非并行: alpha, kfold, max_iter, seed（4个）
- 并行: alpha, kfold, max_iter, seed（4个）

**小计**: 7个模型 × 8个组合 = **56个完全缺失组合**

#### 2. 部分完成模型（34个组合）

这些组合有部分数据，但未达标：

**Person_reID_baseline_pytorch/densenet121**:
- 非并行（4个组合）:
  - 所有参数都有5个变异，但**缺少默认值实验**
- 并行（4个组合）:
  - 所有参数只有1个变异，需要补充**默认值 + 4个变异**

**Person_reID_baseline_pytorch/hrnet18**:
- 非并行（4个组合）:
  - dropout, learning_rate, seed: 5个变异，缺默认值
  - epochs: 4个变异，缺默认值 + 1个变异
- 并行（4个组合）:
  - 所有参数: 3个变异，缺默认值 + 2个变异

**Person_reID_baseline_pytorch/pcb**:
- 非并行（4个组合）:
  - learning_rate, seed: 5个变异，缺默认值
  - dropout, epochs: 4个变异，缺默认值 + 1个变异
- 并行（4个组合）:
  - 所有参数: 3个变异，缺默认值 + 2个变异

**MRT-OAST/default**:
- 非并行（5个组合）:
  - dropout: 4个变异，缺默认值 + 1个变异
  - epochs: 2个变异，缺默认值 + 3个变异
  - learning_rate, seed, weight_decay: 3个变异，缺默认值 + 2个变异
- 并行（5个组合）:
  - 所有参数: 1个变异，缺默认值 + 4个变异

**小计**: **34个部分完成组合**

---

## 📈 需补齐实验详细清单

### 默认值实验（90个）

**每个模型-参数-模式组合都需要1个默认值实验**

| 模型 | 参数数 | 模式 | 需补齐 |
|------|--------|------|--------|
| examples/mnist | 4 | 2 | 8 |
| examples/mnist_rnn | 4 | 2 | 8 |
| examples/mnist_ff | 4 | 2 | 8 |
| examples/siamese | 4 | 2 | 8 |
| Person_reID/densenet121 | 4 | 2 | 8 |
| Person_reID/hrnet18 | 4 | 2 | 8 |
| Person_reID/pcb | 4 | 2 | 8 |
| VulBERTa/mlp | 4 | 2 | 8 |
| resnet20 | 4 | 2 | 8 |
| MRT-OAST/default | 5 | 2 | 10 |
| bug-localization/default | 4 | 2 | 8 |
| **总计** | **45** | **2** | **90** |

### 变异实验（345个）

按需补齐数量分组：

| 需补齐数量 | 组合数 | 总实验数 | 说明 |
|-----------|--------|----------|------|
| 5个变异 | 56 | 280 | 完全缺失组合 |
| 4个变异 | 18 | 72 | 只有1个变异的组合 |
| 3个变异 | 2 | 6 | 只有2个变异的组合 |
| 2个变异 | 12 | 24 | 只有3个变异的组合 |
| 1个变异 | 6 | 6 | 只有4个变异的组合 |
| **总计** | **94** | **388** | |

**注**: 94个组合需要补齐变异（90个全部组合 + 一些需要多次补齐的）

实际需要: **345个变异实验**

---

## 🎯 实验补齐策略

### 优先级分类

#### 第一优先级：性能数据缺失修复（247个实验）

**问题**: 这些实验已经运行，但缺少性能数据提取

**原因可能**:
1. 性能指标提取脚本有bug
2. 日志文件格式解析问题
3. 实验确实失败但未正确标记

**解决方案**:
1. 重新运行性能指标提取脚本
2. 如果无法修复，标记这些实验为无效
3. 重新运行对应的实验

#### 第二优先级：多参数变异修正（17个实验）

**问题**: 17个实验同时变异了多个参数

**影响**: 无法分析单个参数的独立影响

**解决方案**:
1. 将这17个实验标记为无效
2. 为这17个参数-模式组合重新运行单参数变异实验
3. 每个组合需要1个默认值 + 5个单参数变异 = 6个实验
4. 总计: 17 × 6 = 102个实验

#### 第三优先级：补齐缺失实验（435个）

**分阶段执行**:

1. **阶段1**: 默认值实验（90个）
   - 简单、快速
   - 建立所有组合的基线

2. **阶段2**: 快速模型变异补齐（约200个）
   - examples/mnist系列
   - VulBERTa/mlp
   - bug-localization

3. **阶段3**: 中慢速模型变异补齐（约145个）
   - Person_reID系列
   - resnet20
   - MRT-OAST

### 预估时间

基于历史数据（238.51小时完成476个实验，平均30分钟/实验）:

| 阶段 | 实验数 | 预估时间 |
|------|--------|----------|
| 性能数据修复 | 0-247 | 0-123.5小时 |
| 多参数修正 | 102 | 51小时 |
| 默认值补齐 | 90 | 45小时 |
| 变异补齐 | 345 | 172.5小时 |
| **总计** | **537-784** | **268.5-392小时** |

---

## 🚨 关键问题与建议

### 1. 性能数据缺失问题

**严重性**: 🔴 高

**影响**: 51.9%的实验数据不可用

**建议**:
1. **立即调查**: 检查为什么247个实验缺少性能数据
2. **可能原因**:
   - 性能提取脚本bug
   - 特定模型的日志格式不兼容
   - 实验确实失败但未正确标记
3. **修复方案**:
   - 如果可以从日志重新提取：修复提取脚本，重新处理
   - 如果日志不完整：需要重新运行这些实验

### 2. 缺少默认值实验

**严重性**: 🔴 高

**影响**: 100%的组合缺少基线

**分析**:
- 所有90个组合都没有默认值实验
- 这意味着之前的实验计划完全忽略了默认值基线

**建议**:
1. 优先运行90个默认值实验
2. 默认值实验相对简单快速
3. 完成后可以开始有意义的对比分析

### 3. 多参数变异问题

**严重性**: ⚠️ 中

**影响**: 17个实验数据不符合单参数研究目标

**建议**:
1. 标记这17个实验为"多参数变异研究"
2. 重新运行对应的单参数版本
3. 多参数数据可以保留用于未来研究

### 4. 实验规模重估

**当前状态**: 476个实验，但只有44.5%有效

**目标状态**: 540个有效实验（90组合 × 6实验/组合）

**差距**: 需要补齐328-537个实验（取决于性能数据能否修复）

---

## 📝 后续行动计划

### 立即行动（1-2天）

1. ✅ **澄清实验目标** - 本文档已完成
2. ⏳ **调查性能数据缺失原因**
   - 检查performance_metrics提取逻辑
   - 抽样检查缺失实验的日志文件
   - 确定是否可以补救

3. ⏳ **创建补齐配置文件**
   - 基于detailed report生成配置
   - 分为3个阶段：默认值、快速模型、慢速模型

### 短期行动（1-2周）

4. 运行默认值实验（90个，约45小时）
5. 运行快速模型变异补齐（约200个，约100小时）

### 中期行动（2-4周）

6. 运行慢速模型变异补齐（约145个，约72.5小时）
7. 修正多参数变异实验（102个，约51小时）

### 验证与总结

8. 重新运行完成度分析
9. 验证所有540个实验达标
10. 生成最终实验报告

---

## 📊 附录：详细数据

### A. 45个模型-参数组合明细

| 模型 | 参数列表 |
|------|----------|
| examples/mnist | batch_size, epochs, learning_rate, seed |
| examples/mnist_rnn | batch_size, epochs, learning_rate, seed |
| examples/mnist_ff | batch_size, epochs, learning_rate, seed |
| examples/siamese | batch_size, epochs, learning_rate, seed |
| Person_reID_baseline_pytorch/densenet121 | dropout, epochs, learning_rate, seed |
| Person_reID_baseline_pytorch/hrnet18 | dropout, epochs, learning_rate, seed |
| Person_reID_baseline_pytorch/pcb | dropout, epochs, learning_rate, seed |
| VulBERTa/mlp | epochs, learning_rate, seed, weight_decay |
| pytorch_resnet_cifar10/resnet20 | epochs, learning_rate, seed, weight_decay |
| MRT-OAST/default | dropout, epochs, learning_rate, seed, weight_decay |
| bug-localization-by-dnn-and-rvsm/default | alpha, kfold, max_iter, seed |

**总计**: 45个参数（每个参数在2种模式下 = 90个组合）

### B. 数据完整性要求

**必需字段**:

1. **训练状态**: `training_success` = "True"
2. **能耗数据**:
   - 非并行: `energy_cpu_total_joules`, `energy_gpu_total_joules`
   - 并行: `fg_energy_cpu_total_joules`, `fg_energy_gpu_total_joules`
3. **性能数据**（至少一个）:
   - 非并行: `perf_accuracy` 或 `perf_map`
   - 并行: `fg_perf_accuracy` 或 `fg_perf_map`

### C. 变异要求

**单参数变异**:
- `num_mutated_params` = 1
- `mutated_param` 字段指明变异的参数

**唯一性**:
- 同一参数的5个变异实验值必须各不相同
- 通过超参数值去重验证

---

**报告版本**: 1.0
**生成时间**: 2025-12-12
**数据源**: results/raw_data.csv (476行)
**分析脚本**: scripts/analyze_experiment_completion.py
