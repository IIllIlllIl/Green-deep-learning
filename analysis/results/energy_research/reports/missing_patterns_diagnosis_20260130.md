# 缺失值模式诊断报告

**生成日期**: 2026-01-30T16:38:40.162617

---

## 执行摘要

### 关键发现

- ✅ 能耗列完全无缺失（11列）
- ⚠️ hyperparam_seed缺失率: 36.4% (298/818)
- ⚠️ dropna会损失36.4%样本
- ✅ 保守填充可保留所有818个样本
- ⚠️ 组内标准化导致ATE不可比（energy_gpu_avg_watts标准差范围: 8.10-72.97 watts）
- ✅ 共同列14个，足够进行全局标准化分析


---

## 各组数据质量

| 组 | 样本数 | 列数 | 整体缺失率 | 能耗列缺失率 | 完全可用记录 |
|---|--------|------|-----------|-------------|-------------|
| group1_examples | 304 | 21 | 4.3% | 0.0% | 211/304 (69.4%) |
| group2_vulberta | 72 | 20 | 12.9% | 0.0% | 10/72 (13.9%) |
| group3_person_reid | 206 | 22 | 3.8% | 0.0% | 118/206 (57.3%) |
| group4_bug_localization | 90 | 21 | 12.5% | 0.0% | 10/90 (11.1%) |
| group5_mrt_oast | 72 | 21 | 8.5% | 0.0% | 40/72 (55.6%) |
| group6_resnet | 74 | 19 | 5.8% | 0.0% | 41/74 (55.4%) |


---

## 全局统计

- **总列数**: 42
- **共同列数**: 14
- **组特有列数**: 28
- **合并后总样本**: 818
- **完全可用记录**: 520 (63.6%)
- **dropna损失**: 36.4%

---

## 能耗列标准差对比（组内标准化问题）

以下是各组energy_gpu_avg_watts的标准差，说明**组内标准化破坏跨组可比性**：

- **group1_examples_energy_gpu_avg_watts**: 标准差 = 73.09 watts
- **group2_vulberta_energy_gpu_avg_watts**: 标准差 = 8.16 watts
- **group3_person_reid_energy_gpu_avg_watts**: 标准差 = 14.64 watts
- **group4_bug_localization_energy_gpu_avg_watts**: 标准差 = 27.99 watts
- **group5_mrt_oast_energy_gpu_avg_watts**: 标准差 = 10.16 watts
- **group6_resnet_energy_gpu_avg_watts**: 标准差 = 17.27 watts


---

## 推荐策略

### 主策略：保守填充 + 全局标准化

**理由**:
- 能耗列无缺失，核心数据质量高
- 合并仅共同列后仍有63.6%完全可用记录
- dropna会损失36.4%样本，不可接受
- 组特有列（模型标识、性能指标）应保留，用于后续分析


**实施步骤**:
1. 合并所有6组数据（保留所有列）
2. 对共同列中的缺失值（hyperparam_seed）使用全局中位数填充
3. 对组特有列缺失值保持NaN（这些列本就不是所有组都有）
4. 仅对共同列进行全局标准化
5. 基于标准化后的超参数重建交互项


---

## 敏感性分析：CTF删除策略

与参考论文对齐，使用dropna()策略进行敏感性分析，验证填充策略的影响。

---

## 结论

1. **能耗数据质量优秀**：11个能耗列完全无缺失，为因果分析提供坚实基础
2. **全局标准化必要且可行**：14个共同列足够进行全局标准化，恢复跨组可比性
3. **保守填充策略推荐**：保留所有818个样本，最大化数据利用率
4. **敏感性分析必须**：对比dropna策略，验证结果稳健性

---

**生成脚本**: `scripts/diagnose_missing_patterns.py`
