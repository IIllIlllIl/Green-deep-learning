# DiBS分层因果分析验收报告

**日期**: 2026-02-06
**最后更新**: 2026-02-06 21:58
**状态**: 🔄 进行中（group3_non_parallel分析进行中）

---

## 一、验收摘要

| 分层 | 预期运行 | 完成运行 | 汇总文件 | 稳定边 | ATE计算 | 状态 |
|------|----------|----------|----------|--------|---------|------|
| group1_parallel | 3 | 3 | ✅ | 0 | ✅ 33边 | ⚠️ 使用平均图强边 |
| group1_non_parallel | 5 | 5 | ✅ | 1 | ✅ 1边 | ⚠️ 稳定边极少 |
| group3_parallel | 5 | 5 | ✅ | 2 | ✅ 2边 | ✅ 完成 |
| group3_non_parallel | 7 | 0 | ❌ | - | - | 🔄 运行中 |

---

## 二、详细验收结果

### 2.1 group1_parallel

**基本信息**:
- 样本数: 178
- 特征数: 26
- 运行次数: 3（seed: 42, 123, 456）
- 配置: 标准配置（n_steps=5000）

**结果分析**:
- 平均因果图: ✅ 已生成
- 稳定边: 0条（统计显著）
- 原因: 3次运行太少，最高检测率66.7%不足以通过二项式检验（p=0.5 > 0.05）

**从平均因果图提取的强边**:
- threshold>0.3: 33条边
- 这些边将用于ATE计算

**建议**:
- 增加运行次数至5次可提高稳定边检测灵敏度
- 当前结果可使用平均因果图的强边进行后续分析

---

### 2.2 group1_non_parallel

**基本信息**:
- 样本数: 126
- 特征数: 26
- 运行次数: 5（seed: 42, 123, 456, 789, 1011）
- 配置: 标准配置（n_steps=5000）

**结果分析**:
- 平均因果图: ✅ 已生成
- 稳定边: 1条（统计显著）
  - `model_mnist_ff → perf_test_accuracy`（检测率100%，p=0.03125）

**关键发现**:
- 只有1条边在5次运行中100%检测到
- 这表明因果结构在不同seed下变异较大
- 与并行场景对比可揭示训练场景对因果结构的影响

---

### 2.3 group3_parallel（进行中）

**基本信息**:
- 样本数: 113
- 特征数: 28
- 预期运行次数: 5
- 当前完成: 3次（seed: 42, 123, 456）

**当前状态**:
- 后台进程正在运行（已运行约11小时）
- 等待完成后生成汇总文件

---

### 2.4 group3_non_parallel（未开始）

**基本信息**:
- 样本数: 93
- 特征数: 28
- 预期运行次数: 7（使用小样本配置）
- 配置: 小样本适配（n_steps=10000，alpha=0.08）

**状态**: 等待group3_parallel完成后开始

---

## 三、验收标准检查

| 编号 | 验收项 | 标准 | group1_parallel | group1_non_parallel | group3_parallel |
|------|--------|------|-----------------|---------------------|-----------------|
| V1 | 运行完成 | 无错误 | ✅ | ✅ | 🔄 |
| V2 | 无缺失值 | 数据检查通过 | ✅ | ✅ | ✅ |
| V3 | 收敛性 | 一致性≥0.5 | ⚠️ 待验证 | ⚠️ 待验证 | - |
| V4 | 边检测 | ≥5条强边 | ✅ 33条 | ✅ | - |
| V5 | 敏感性分析 | 按配置完成 | ✅ 3/3 | ✅ 5/5 | 3/5 |
| V6 | 稳定边 | ≥3条 | ❌ 0条 | ❌ 1条 | - |

**V6验收说明**:
- 稳定边数量不足是由于二项式检验的保守性
- 解决方案：使用平均因果图的强边（threshold>0.3）进行后续分析
- 这种方法在探索性分析中是可接受的

---

## 四、下一步行动

### 4.1 等待完成
1. 等待group3_parallel完成剩余2次运行
2. 等待group3_non_parallel完成7次运行

### 4.2 已启动的分析
- [x] group1_parallel ATE计算（后台运行中）
- [x] group1_non_parallel ATE计算（后台运行中）

### 4.3 待执行
- [ ] 完成所有DiBS分析
- [ ] 执行全部ATE计算
- [ ] 全局FDR校正
- [ ] 权衡检测
- [ ] 与全局分析对标
- [ ] 同行评审

---

## 五、技术备注

### 5.1 稳定边检测方法

使用二项式检验（单尾，α=0.05）判断边是否在多次运行中稳定出现：
- H0: 边随机出现（概率=0.5）
- H1: 边稳定出现（概率>0.5）
- 拒绝H0 → 边是稳定的

**3次运行的检验限制**:
- 需要3/3检测才能显著（p=0.125 > 0.05不显著）
- 实际上3次运行无法产生显著稳定边

**5次运行的检验**:
- 5/5检测：p=0.03125 < 0.05 ✅
- 4/5检测：p=0.1875 > 0.05 ❌

### 5.2 替代方案：平均因果图强边

当稳定边不足时，使用平均因果图中weight>0.3的边：
- 这些边在至少某些运行中被强烈检测
- 适用于探索性分析
- 结果解释需注意不确定性

---

**报告生成时间**: 2026-02-06 21:35
**下次更新**: 待group3分析完成后
