# DiBS训练数据质量评估报告

**生成时间**: 2026-01-15 17:08:29

## 执行摘要

- **总样本数**: 423
- **分组数量**: 6

### 快速评级总览

| 组别 | 样本量 | 特征数 | 超参数 | 缺失值 | 总体评级 | DiBS就绪 |
|------|--------|--------|--------|--------|----------|----------|
| examples（图像分类-小型） | 126 | 18 | 4 | 0.0% | 优秀 | ✅ |
| VulBERTa（代码漏洞检测） | 52 | 16 | 0 | 0.0% | 需要清理 | ❌ |
| Person_reID（行人重识别） | 118 | 19 | 4 | 0.0% | 优秀 | ✅ |
| bug-localization（缺陷定位） | 40 | 17 | 0 | 0.0% | 良好 | ✅ |
| MRT-OAST（缺陷定位） | 46 | 16 | 0 | 0.0% | 良好 | ✅ |
| pytorch_resnet（图像分类-ResNet） | 41 | 18 | 4 | 0.0% | 良好 | ✅ |

---

## 详细分组分析

### 1. examples（图像分类-小型）

**组ID**: `group1_examples`

#### 基本信息

- **样本数量**: 126 (优秀)
- **特征数量**: 18 (优秀)
- **超参数数量**: 4 (充分)
- **能耗指标数量**: 11
- **性能指标数量**: 1

#### 数据质量

- **缺失值**: 0 (优秀)
  - 缺失率: 0.00%
  - 有缺失的特征数: 0

- **常数特征**: 0
- **低方差特征**: 0

#### 超参数覆盖

| 超参数 | 唯一值数 | 多样性比率 |
|--------|----------|------------|
| batch_size | 42 | 33.33% |
| epochs | 11 | 8.73% |
| learning_rate | 28 | 22.22% |
| seed | 28 | 22.22% |

#### 异常值检测

存在较多异常值的特征（>5%）:

- `hyperparam_epochs`: 29个 (23.0%)
- `hyperparam_learning_rate`: 27个 (21.4%)
- `hyperparam_seed`: 27个 (21.4%)
- `num_mutated_params`: 15个 (11.9%)

#### 质量评级

- **总体评级**: **优秀**
- **DiBS就绪**: ✅ 是

---

### 2. VulBERTa（代码漏洞检测）

**组ID**: `group2_vulberta`

#### 基本信息

- **样本数量**: 52 (优秀)
- **特征数量**: 16 (优秀)
- **超参数数量**: 0 (无)
- **能耗指标数量**: 11
- **性能指标数量**: 3

#### 数据质量

- **缺失值**: 0 (优秀)
  - 缺失率: 0.00%
  - 有缺失的特征数: 0

- **常数特征**: 1
  - 零方差特征:
    - `energy_gpu_util_max_percent`
- **低方差特征**: 3

#### 超参数覆盖

⚠️ **无超参数数据** - 只能分析能耗-性能关系，不能研究超参数的因果影响

#### 异常值检测

存在较多异常值的特征（>5%）:

- `perf_eval_samples_per_second`: 12个 (23.1%)
- `energy_gpu_min_watts`: 12个 (23.1%)
- `perf_eval_loss`: 8个 (15.4%)
- `energy_gpu_temp_max_celsius`: 8个 (15.4%)
- `duration_seconds`: 7个 (13.5%)

#### 质量评级

- **总体评级**: **需要清理**
- **DiBS就绪**: ❌ 否

#### 改进建议

- 无超参数数据，只能分析能耗-性能关系，不能分析超参数影响
- 存在1个常数特征，需要在DiBS训练前移除

---

### 3. Person_reID（行人重识别）

**组ID**: `group3_person_reid`

#### 基本信息

- **样本数量**: 118 (优秀)
- **特征数量**: 19 (优秀)
- **超参数数量**: 4 (充分)
- **能耗指标数量**: 11
- **性能指标数量**: 3

#### 数据质量

- **缺失值**: 0 (优秀)
  - 缺失率: 0.00%
  - 有缺失的特征数: 0

- **常数特征**: 0
- **低方差特征**: 2

#### 超参数覆盖

| 超参数 | 唯一值数 | 多样性比率 |
|--------|----------|------------|
| dropout | 96 | 81.36% |
| epochs | 45 | 38.14% |
| learning_rate | 96 | 81.36% |
| seed | 112 | 94.92% |

#### 质量评级

- **总体评级**: **优秀**
- **DiBS就绪**: ✅ 是

---

### 4. bug-localization（缺陷定位）

**组ID**: `group4_bug_localization`

#### 基本信息

- **样本数量**: 40 (可用)
- **特征数量**: 17 (优秀)
- **超参数数量**: 0 (无)
- **能耗指标数量**: 11
- **性能指标数量**: 4

#### 数据质量

- **缺失值**: 0 (优秀)
  - 缺失率: 0.00%
  - 有缺失的特征数: 0

- **常数特征**: 0
- **低方差特征**: 3

#### 超参数覆盖

⚠️ **无超参数数据** - 只能分析能耗-性能关系，不能研究超参数的因果影响

#### 异常值检测

存在较多异常值的特征（>5%）:

- `energy_gpu_util_avg_percent`: 8个 (20.0%)
- `energy_gpu_util_max_percent`: 8个 (20.0%)
- `energy_cpu_pkg_joules`: 3个 (7.5%)
- `energy_cpu_ram_joules`: 3个 (7.5%)
- `energy_cpu_total_joules`: 3个 (7.5%)

#### 质量评级

- **总体评级**: **良好**
- **DiBS就绪**: ✅ 是

#### 改进建议

- 样本量为40，建议增加到50+以提高稳定性
- 无超参数数据，只能分析能耗-性能关系，不能分析超参数影响

---

### 5. MRT-OAST（缺陷定位）

**组ID**: `group5_mrt_oast`

#### 基本信息

- **样本数量**: 46 (可用)
- **特征数量**: 16 (优秀)
- **超参数数量**: 0 (无)
- **能耗指标数量**: 11
- **性能指标数量**: 3

#### 数据质量

- **缺失值**: 0 (优秀)
  - 缺失率: 0.00%
  - 有缺失的特征数: 0

- **常数特征**: 0
- **低方差特征**: 3

#### 超参数覆盖

⚠️ **无超参数数据** - 只能分析能耗-性能关系，不能研究超参数的因果影响

#### 异常值检测

存在较多异常值的特征（>5%）:

- `energy_gpu_temp_max_celsius`: 11个 (23.9%)
- `energy_gpu_avg_watts`: 9个 (19.6%)
- `num_mutated_params`: 8个 (17.4%)

#### 质量评级

- **总体评级**: **良好**
- **DiBS就绪**: ✅ 是

#### 改进建议

- 样本量为46，建议增加到50+以提高稳定性
- 无超参数数据，只能分析能耗-性能关系，不能分析超参数影响

---

### 6. pytorch_resnet（图像分类-ResNet）

**组ID**: `group6_resnet`

#### 基本信息

- **样本数量**: 41 (可用)
- **特征数量**: 18 (优秀)
- **超参数数量**: 4 (充分)
- **能耗指标数量**: 11
- **性能指标数量**: 2

#### 数据质量

- **缺失值**: 0 (优秀)
  - 缺失率: 0.00%
  - 有缺失的特征数: 0

- **常数特征**: 0
- **低方差特征**: 2

#### 超参数覆盖

| 超参数 | 唯一值数 | 多样性比率 |
|--------|----------|------------|
| epochs | 32 | 78.05% |
| learning_rate | 37 | 90.24% |
| seed | 40 | 97.56% |
| weight_decay | 37 | 90.24% |

#### 异常值检测

存在较多异常值的特征（>5%）:

- `energy_gpu_temp_avg_celsius`: 7个 (17.1%)

#### 质量评级

- **总体评级**: **良好**
- **DiBS就绪**: ✅ 是

#### 改进建议

- 样本量为41，建议增加到50+以提高稳定性

---

## 总体结论

### 数据质量分层

**优秀组 (2个)** - 可直接用于DiBS分析:
- examples（图像分类-小型） (126样本, 4超参数)
- Person_reID（行人重识别） (118样本, 4超参数)

**良好组 (3个)** - 可用于DiBS分析，略有限制:
- bug-localization（缺陷定位） (40样本, 0超参数)
- MRT-OAST（缺陷定位） (46样本, 0超参数)
- pytorch_resnet（图像分类-ResNet） (41样本, 4超参数)

**需要清理组 (1个)** - 需要数据预处理:
- VulBERTa（代码漏洞检测） (有常数特征)

### 关键发现

⚠️ **3个组缺少超参数数据**:
- VulBERTa（代码漏洞检测）
- bug-localization（缺陷定位）
- MRT-OAST（缺陷定位）

这些组只能用于能耗-性能关系分析，无法研究超参数的因果影响。

⚠️ **3个组样本量<50**:
- bug-localization（缺陷定位）: 40样本
- MRT-OAST（缺陷定位）: 46样本
- pytorch_resnet（图像分类-ResNet）: 41样本

DiBS在小样本上可能不够稳定，建议增加样本量或使用交叉验证。

### 使用建议

#### 推荐用于DiBS分析的组

以下5个组已准备就绪，可直接用于DiBS因果图学习:

- **examples（图像分类-小型）**: 126样本, 18特征, 4个超参数
- **Person_reID（行人重识别）**: 118样本, 19特征, 4个超参数
- **MRT-OAST（缺陷定位）**: 46样本, 16特征, 无超参数（仅能耗-性能分析）
- **pytorch_resnet（图像分类-ResNet）**: 41样本, 18特征, 4个超参数
- **bug-localization（缺陷定位）**: 40样本, 17特征, 无超参数（仅能耗-性能分析）

#### 研究问题建议

**问题1: 超参数对能耗的影响** - 推荐使用以下3个组:
- examples（图像分类-小型） (4个超参数)
- Person_reID（行人重识别） (4个超参数)
- pytorch_resnet（图像分类-ResNet） (4个超参数)

**问题2: 能耗和性能的权衡关系** - 所有5个就绪组都可用

**问题3: 中间变量的中介效应** - 推荐使用高质量组:
- examples（图像分类-小型） (最完整的特征集)
- Person_reID（行人重识别） (最完整的特征集)
- pytorch_resnet（图像分类-ResNet） (最完整的特征集)

#### 数据清理步骤

在使用DiBS前，需要执行以下清理步骤:

1. **处理缺失值**:
   ```python
   # 方案A: 删除有缺失值的行（如果缺失较少）
   df_clean = df.dropna()
   
   # 方案B: 插补（如果缺失较多）
   from sklearn.impute import SimpleImputer
   imputer = SimpleImputer(strategy='median')
   df_clean = pd.DataFrame(imputer.fit_transform(df), columns=df.columns)
   ```

2. **移除常数特征**:
   ```python
   # 移除方差为0的特征
   df_clean = df_clean.loc[:, df_clean.var() > 0]
   ```

3. **标准化数据** (DiBS推荐):
   ```python
   from sklearn.preprocessing import StandardScaler
   scaler = StandardScaler()
   df_scaled = pd.DataFrame(scaler.fit_transform(df_clean), columns=df_clean.columns)
   ```

---

## 附录：评估标准

### 样本量评级

- **优秀**: ≥50 样本
- **可用**: 30-49 样本
- **不推荐**: <30 样本 (DiBS最低要求)

### 缺失值评级

- **优秀**: 0% 缺失 (DiBS严格要求)
- **良好**: <1% 缺失
- **不可用**: ≥1% 缺失

### 特征数评级

- **优秀**: ≥15 特征
- **良好**: 10-14 特征
- **一般**: <10 特征

### 超参数覆盖评级

- **充分**: ≥3 超参数
- **基本**: 2 超参数
- **不足**: 1 超参数
- **无**: 0 超参数 (仅能耗-性能分析)

### DiBS就绪条件

满足所有以下条件:
- 样本量 ≥30
- 缺失率 = 0%
- 无常数特征
- 特征数 ≥10
