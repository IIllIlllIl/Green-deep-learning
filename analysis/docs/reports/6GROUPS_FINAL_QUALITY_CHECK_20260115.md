# 6分组数据质量检查报告

**日期**: 2026-01-15
**检查对象**: `/home/green/energy_dl/nightly/analysis/data/energy_research/6groups_final/`

---

## 执行摘要

**数据质量评分**: 7/10 ⭐⭐⭐⭐⭐⭐⭐

**总体状态**: ✅ 基本成功,但有改进空间

**关键发现**:
- ✅ 成功生成4个分组,保留656/818条数据(80.2%)
- ✅ 语义超参数合并正确实现
- ✅ 模型变量One-hot编码正确
- ⚠️ Group 5和6缺失(data.csv中没有mtfa/rvsm模型)
- ⚠️ 仍有162条数据未被使用

---

## 详细检查结果

### 1. 数据完整性 ✅

| 分组 | 文件大小 | 行数 | 列数 | 状态 |
|------|---------|------|------|------|
| group1_examples | 58KB | 304 | 21 | ✅ 正常 |
| group2_person_reid | 40KB | 206 | 21 | ✅ 正常 |
| group3_vulberta | 16KB | 72 | 21 | ✅ 正常 |
| group4_resnet | 15KB | 74 | 19 | ✅ 正常 |
| group5_mrt_oast | - | 0 | - | ❌ 无数据 |
| group6_bug_localization | - | 0 | - | ❌ 无数据 |

**结论**: 4个文件生成成功,格式正确,可读取。

---

### 2. 数据保留率分析 ⚠️

**总体情况**:
- 可用数据: 818条
- 已使用: 656条 (80.2%)
- 未使用: 162条 (19.8%)

**未使用数据原因**:

1. **Group 5和6模型不存在** (主要原因):
   - 脚本配置: `mtfa`, `rvsm`
   - data.csv实际模型: 无这两个模型
   - 影响: 无法生成这两组数据

2. **data.csv中的模型分布**:
   ```
   default        234条  ← 未分配到任何组
   mlp            152条  ← 只有72条被使用(Group 3)
   mnist_ff        87条  ← 全部使用(Group 1)
   mnist           75条  ← 全部使用(Group 1)
   resnet20        74条  ← 全部使用(Group 4)
   densenet121     74条  ← 全部使用(Group 2)
   mnist_rnn       71条  ← 全部使用(Group 1)
   siamese         71条  ← 全部使用(Group 1)
   pcb             66条  ← 全部使用(Group 2)
   hrnet18         66条  ← 全部使用(Group 2)
   ```

3. **关键问题**:
   - ❌ `default` 模型(234条)完全未使用
   - ⚠️ `mlp` 模型只使用了72/152条(47.4%)

**改进建议**: 需要调查`default`和`mlp`模型的数据质量问题。

---

### 3. 语义超参数合并 ✅

**合并效果**:
- `hyperparam_alpha` 缺失率: 93.5%
- `hyperparam_weight_decay` 缺失率: 82.6%
- **`hyperparam_l2_regularization` 缺失率: 76.1%** ✅

**结论**: 合并成功,缺失率从93.5%降低到76.1%,提升17.4个百分点。

---

### 4. 模型变量编码 ✅

**Group 1 (examples)**: 4个模型 → 3个模型变量
- ✅ `model_mnist_ff`, `model_mnist_rnn`, `model_siamese`
- ✅ 基准模型: `mnist` (正确省略)

**Group 2 (person_reid)**: 3个模型 → 2个模型变量
- ✅ `model_hrnet18`, `model_pcb`
- ✅ 基准模型: `densenet121` (正确省略)

**Group 3 (vulberta)**: 1个模型 → 0个模型变量
- ✅ 只有`mlp`,无需编码

**Group 4 (resnet)**: 1个模型 → 0个模型变量
- ✅ 只有`resnet20`,无需编码

**结论**: One-hot n-1编码完全正确。

---

### 5. 列选择正确性 ✅

**验证方法**: 检查每组是否只包含该组使用的列

**Group 1 (21列)**:
- ✅ 能耗列: 10个
- ✅ 控制变量: 2个 (is_parallel, timestamp)
- ✅ 模型变量: 3个
- ✅ 超参数: 4个 (batch_size, learning_rate, epochs, seed)
- ✅ 性能指标: 1个 (test_accuracy)
- ⚠️ 未使用l2_regularization (Group 1模型不使用)

**Group 4 (19列)**:
- ✅ 比Group 1少2列 (无模型变量)
- ✅ 列选择符合该组配置

**结论**: 避免了统一阈值问题,每组只选择相关列。

---

### 6. 潜在问题分析 ⚠️

#### 问题1: Group 5和6缺失 ❌

**原因**: data.csv中不存在`mtfa`和`rvsm`模型

**解决方案**:
- 检查raw_data.csv是否有这些模型
- 或从分组配置中移除这两组

#### 问题2: `default`模型未使用 ❌

**影响**: 234条数据(28.6%)完全未使用

**需要调查**:
- `default`是什么模型?
- 是否应该分配到某个组?

#### 问题3: `mlp`模型部分使用 ⚠️

**数据**: 152条总数,只使用72条(47.4%)

**可能原因**:
- 80条mlp数据缺少性能指标
- 需要检查这80条数据的质量

---

## 改进建议

### 优先级1 (高) 🔴

1. **调查`default`模型**:
   - 确定其真实模型名称
   - 分配到合适的组或创建新组

2. **修复Group 5和6配置**:
   - 从raw_data.csv查找正确的模型名称
   - 或移除这两组配置

### 优先级2 (中) 🟡

3. **提高mlp数据利用率**:
   - 分析80条未使用mlp数据的问题
   - 尝试恢复缺失的性能指标

4. **验证数据质量**:
   - 检查每组数据的缺失率
   - 确保足够样本量用于DiBS分析

---

## 总结

### 成功之处 ✅

1. ✅ 语义超参数合并正确实现
2. ✅ 模型变量One-hot编码正确
3. ✅ 避免了统一缺失率阈值问题
4. ✅ 4个分组数据质量良好

### 需要改进 ⚠️

1. ⚠️ 数据利用率80.2%,仍有提升空间
2. ⚠️ 234条`default`数据未使用
3. ⚠️ Group 5和6配置错误

### 最终评分

**数据质量**: 7/10 ⭐⭐⭐⭐⭐⭐⭐

**建议**:
- ✅ 当前4组数据可以直接用于DiBS分析
- ⚠️ 建议修复`default`模型问题以提高数据利用率
- ⚠️ 建议修正Group 5和6配置

---

**检查完成时间**: 2026-01-15 22:50
**检查人**: Claude Code Subagent

