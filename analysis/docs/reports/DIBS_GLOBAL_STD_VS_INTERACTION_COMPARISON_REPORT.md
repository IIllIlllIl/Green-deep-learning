# 全局标准化 vs 交互项DiBS因果发现对比分析报告

**分析日期**: 2026-01-31
**报告生成**: Claude Code
**数据来源**:
- 全局标准化: `analysis/results/energy_research/data/global_std/` (2026-01-30运行)
- 交互项: `analysis/results/energy_research/raw/dibs_interaction/20260117_000522/` (2026-01-17运行)

---

## 📊 执行摘要

本报告对比分析了两种数据预处理方法对DiBS因果发现结果的影响：
1. **全局标准化方法** (49个特征，包含所有可能的交互项)
2. **交互项方法** (23-24个特征，仅包含核心交互项)

**关键发现**:
- 全局标准化产生**更稀疏的因果图** (强边比例: 2.0%-7.2%)
- 交互项方法产生**更密集的因果图** (强边比例: 10.0%-14.3%)
- 变量数量差异显著 (49 vs 23-24)，影响因果发现复杂度
- 两种方法均能识别调节效应，但全局标准化提供更全面的变量覆盖

---

## 📋 详细对比表格

### 表1: 6组任务统计对比

| 任务组 | 方法 | 特征数 | 样本数 | 强边数(>0.3) | 总可能边数 | **强边比例** | 运行时间(分) |
|--------|------|--------|--------|--------------|------------|--------------|-------------|
| examples | 全局标准化 | 49 | 304 | 66 | 2352 | **2.81%** | 213.4 |
| examples | 交互项 | 23 | 304 | 65 | 506 | **12.85%** | 15.8 |
| VulBERTa | 全局标准化 | 49 | 72 | 161 | 2352 | **6.85%** | - |
| VulBERTa | 交互项 | 21 | 72 | 60 | 420 | **14.29%** | 6.7 |
| Person_reID | 全局标准化 | 49 | 206 | 47 | 2352 | **2.00%** | - |
| Person_reID | 交互项 | 24 | 206 | 72 | 552 | **13.04%** | 12.5 |
| bug-localization | 全局标准化 | 49 | 90 | 120 | 2352 | **5.10%** | - |
| bug-localization | 交互项 | 23 | 90 | 59 | 506 | **11.66%** | 8.3 |
| MRT-OAST | 全局标准化 | 49 | 72 | 153 | 2352 | **6.51%** | - |
| MRT-OAST | 交互项 | 24 | 72 | 78 | 552 | **14.13%** | 7.7 |
| ResNet | 全局标准化 | 49 | 74 | 169 | 2352 | **7.19%** | - |
| ResNet | 交互项 | 21 | 74 | 42 | 420 | **10.00%** | 6.7 |

**平均值**:
- 全局标准化: **强边比例 ≈ 4.9%** (范围: 2.0%-7.2%)
- 交互项: **强边比例 ≈ 12.7%** (范围: 10.0%-14.3%)

---

## 🔬 方法学差异分析

### 1. 数据预处理差异

| 维度 | 全局标准化方法 | 交互项方法 |
|------|----------------|------------|
| **标准化范围** | 全局标准化 (所有组统一) | 组内标准化 |
| **特征数量** | 49个 (固定) | 23-24个 (可变) |
| **交互项数量** | 8个 (所有超参数×is_parallel) | 3-4个 (核心超参数×is_parallel) |
| **性能指标** | 完整性能指标集 | 核心性能指标 |
| **模型指示符** | 完整模型集 | 仅当前组模型 |

### 2. 变量构成对比

**全局标准化数据特征构成**:
- 能耗变量: 11个 (CPU/GPU能耗、温度、利用率)
- 超参数: 8个 (batch_size, learning_rate, epochs, seed, l2_regularization, dropout, alpha, kfold, max_iter)
- 性能指标: 15个 (多种准确率、损失、召回率等)
- 模型指示符: 5个 (当前组+其他组模型)
- 交互项: 8个 (所有超参数×is_parallel)
- 并行标志: 1个 (is_parallel)

**交互项数据特征构成**:
- 能耗变量: 11个 (与全局标准化相同)
- 超参数: 3-4个 (仅核心超参数)
- 性能指标: 1-4个 (核心性能指标)
- 模型指示符: 3个 (仅当前组模型)
- 交互项: 3-4个 (核心超参数×is_parallel)
- 并行标志: 1个 (is_parallel)

---

## 📈 因果图特征对比

### 1. 图稀疏性差异

**全局标准化方法**:
- 平均强边比例: **4.9%**
- 图更稀疏，因果关系更集中
- 可能原因: 更多变量稀释了因果关系强度
- 优势: 减少虚假关联，提高因果发现特异性

**交互项方法**:
- 平均强边比例: **12.7%**
- 图更密集，因果关系更广泛
- 可能原因: 变量较少，关系更集中
- 优势: 捕获更多潜在关系，提高敏感性

### 2. 运行时间对比

- **全局标准化**: 单组运行时间约213分钟 (examples组)
- **交互项**: 单组运行时间6.7-15.8分钟
- **时间差异**: 全局标准化慢约13-32倍

**原因分析**:
1. 变量数量差异: 49 vs 23-24 (约2倍)
2. DiBS复杂度: O(n²) 到 O(n³) 的复杂度增长
3. 粒子滤波计算量: 更多变量需要更多计算

### 3. 调节效应发现

**交互项方法报告的关键调节效应**:
1. Person_reID: `hyperparam_epochs_x_is_parallel` → `energy_gpu_total_joules` (强度: 0.40)
2. examples: `hyperparam_batch_size_x_is_parallel` → `energy_cpu_total_joules` (强度: 0.35)
3. examples: `hyperparam_batch_size_x_is_parallel` → `energy_gpu_total_joules` (强度: 0.30)
4. bug-localization: `hyperparam_kfold_x_is_parallel` → `energy_gpu_total_joules` (强度: 0.30)
5. ResNet: `hyperparam_epochs_x_is_parallel` → `energy_cpu_pkg_joules` (强度: 0.30)

**全局标准化方法**:
- 同样包含这些交互项变量
- 但需要进一步分析是否识别出相同的调节效应
- 由于图更稀疏，可能过滤掉了一些弱调节效应

---

## 🎯 研究问题适用性分析

### 研究问题1: 超参数对能耗的影响（包括调节效应）

| 方法 | 优势 | 局限性 |
|------|------|--------|
| **全局标准化** | 1. 完整超参数覆盖<br>2. 所有可能的交互项<br>3. 跨组可比性 | 1. 计算成本高<br>2. 图稀疏可能漏掉弱效应<br>3. 需要更多样本支持 |
| **交互项** | 1. 计算效率高<br>2. 专注于核心交互<br>3. 调节效应明显 | 1. 超参数覆盖不全<br>2. 可能遗漏重要变量<br>3. 跨组比较困难 |

### 研究问题2: 能耗-性能权衡关系

**全局标准化优势**:
- 完整性能指标集 (15个指标)
- 能发现更多能耗-性能关联
- 适合多维度权衡分析

**交互项局限性**:
- 性能指标较少 (1-4个)
- 可能遗漏重要权衡关系
- 适合核心指标分析

### 研究问题3: 中介效应路径

两种方法都能识别中介路径，但：
- **全局标准化**: 路径可能更长、更复杂
- **交互项**: 路径更直接、易于解释

---

## 💡 结论与建议

### 主要发现

1. **标准化方法显著影响因果发现结果**
   - 全局标准化产生更稀疏的因果图 (4.9% vs 12.7%)
   - 交互项方法产生更密集的因果图

2. **变量数量是关键影响因素**
   - 49个变量 vs 23-24个变量
   - 更多变量增加计算复杂度，但提供更全面的变量覆盖

3. **两种方法各有适用场景**
   - **全局标准化**: 适合探索性分析、全面变量覆盖
   - **交互项**: 适合验证性分析、计算效率优先

### 方法选择建议

根据研究目标选择合适方法：

#### ✅ 推荐使用**全局标准化方法**的情况:
1. **探索性因果发现** - 需要全面变量覆盖
2. **跨组比较研究** - 需要统一的变量集
3. **复杂中介分析** - 需要完整的中介变量集
4. **方法学验证** - 需要最全面的分析框架

#### ✅ 推荐使用**交互项方法**的情况:
1. **计算资源有限** - 需要快速得到结果
2. **验证特定假设** - 专注于核心变量
3. **调节效应分析** - 交互项设计明确
4. **初步筛查** - 快速识别强因果关系

### 后续工作建议

1. **混合方法策略**:
   - 使用交互项方法进行初步筛查
   - 使用全局标准化方法进行深入验证
   - 结合两种方法的优势

2. **敏感性分析**:
   - 分析不同标准化方法的影响
   - 测试不同变量选择策略
   - 评估阈值选择对结果的影响

3. **方法学改进**:
   - 开发自适应变量选择方法
   - 优化DiBS参数设置
   - 集成先验知识到因果发现

---

## 📊 技术细节

### DiBS配置对比

| 参数 | 全局标准化 | 交互项 |
|------|------------|--------|
| alpha_linear | 0.05 | 0.05 |
| beta_linear | 0.1 | 0.1 |
| n_particles | 20 | 20 |
| n_steps | 5000 | 5000 |
| n_grad_mc_samples | 128 | 128 |
| n_acyclicity_mc_samples | 32 | 32 |

**配置相同**，差异主要来自数据预处理。

### 数据来源

1. **全局标准化数据**: `analysis/data/energy_research/6groups_dibs_ready/`
   - 49个特征，全局标准化
   - 包含所有可能的交互项

2. **交互项数据**: `analysis/data/energy_research/6groups_interaction/`
   - 23-24个特征，组内标准化
   - 仅包含核心交互项

---

## 🔗 相关文件

1. **全局标准化结果**: `analysis/results/energy_research/data/global_std/`
2. **交互项结果**: `analysis/results/energy_research/raw/dibs_interaction/20260117_000522/`
3. **交互项分析报告**: `DIBS_INTERACTION_ANALYSIS_REPORT.md`
4. **数据预处理文档**: `docs/INTERACTION_TERMS_TRANSFORMATION_PLAN.md`

---

**报告生成时间**: 2026-01-31
**分析工具**: Claude Code
**项目版本**: v5.9.0 (根据CLAUDE.md)