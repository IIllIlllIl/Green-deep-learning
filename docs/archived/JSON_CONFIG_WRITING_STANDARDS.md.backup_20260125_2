# JSONé…ç½®æ–‡ä»¶ä¹¦å†™è§„èŒƒ â­â­â­

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-12-13
**æœ€åæ›´æ–°**: 2025-12-13
**é€‚ç”¨ç‰ˆæœ¬**: v4.7.3+

---

> âš ï¸ **é‡è¦æç¤º (2026-01-25)**
>
> æœ¬æ–‡æ¡£å¼ºè°ƒçš„"**å•å‚æ•°å˜å¼‚åŸåˆ™**"å¯èƒ½ä¸å½“å‰å®éªŒè®¾è®¡ä¸ä¸€è‡´ï¼
>
> æ ¹æ®æœ€æ–°çš„ [EXPERIMENT_EXPANSION_PLAN_20260105.md](EXPERIMENT_EXPANSION_PLAN_20260105.md)ï¼Œé¡¹ç›®å·²æ‰©å±•ä¸ºæ”¯æŒ**å¤šå‚æ•°å˜å¼‚**å®éªŒã€‚
>
> **å…³é”®å˜åŒ–**:
> - **åŸè®¾è®¡**: æ¯æ¬¡åªå˜å¼‚1ä¸ªè¶…å‚æ•°
> - **æ–°è®¾è®¡**: å¯åŒæ—¶å˜å¼‚å¤šä¸ªè¶…å‚æ•°
>
> å¦‚æœæ‚¨æ­£åœ¨è¿›è¡Œå¤šå‚æ•°å˜å¼‚å®éªŒï¼Œè¯·å‚è€ƒ EXPERIMENT_EXPANSION_PLAN_20260105.md ä¸­çš„é…ç½®æ ¼å¼ã€‚
>
> å¯¹äºå•å‚æ•°å˜å¼‚å®éªŒï¼Œæœ¬è§„èŒƒä»ç„¶æœ‰æ•ˆã€‚

---

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

1. **å•å‚æ•°å˜å¼‚åŸåˆ™**: æ¯ä¸ªå®éªŒé…ç½®åªèƒ½å˜å¼‚ä¸€ä¸ªè¶…å‚æ•°
2. **ä½¿ç”¨`mutate`æ•°ç»„**: æŒ‡å®šå˜å¼‚å‚æ•°æ—¶ä½¿ç”¨`"mutate": ["å‚æ•°å"]`æ•°ç»„æ ¼å¼
3. **ç¦æ­¢`mutate_params`å¯¹è±¡**: ä¸è¦ä½¿ç”¨`mutate_params`å¯¹è±¡ï¼ˆä¼šå¯¼è‡´å¤šå‚æ•°åŒæ—¶å˜å¼‚ï¼‰
4. **é”®åè§„èŒƒ**: ä½¿ç”¨`"repo"`è€Œé`"repository"`

---

## ğŸ“‹ é…ç½®æ–‡ä»¶ç»“æ„

### é¡¶å±‚ç»“æ„

```json
{
  "experiment_name": "é…ç½®åç§°",
  "description": "æè¿°",
  "comment": "æ³¨é‡Šè¯´æ˜",

  "mode": "mutation",
  "max_retries": 2,
  "governor": "performance",
  "use_deduplication": true,
  "historical_csvs": ["data/raw_data.csv"],

  "experiments": [
    // å®éªŒé…ç½®åˆ—è¡¨
  ]
}
```

### å¿…é¡»å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|--------|
| `mode` | string | å®éªŒæ¨¡å¼ | `"mutation"` |
| `max_retries` | number | æœ€å¤§é‡è¯•æ¬¡æ•° | `2` |
| `governor` | string | CPUè°ƒé¢‘ç­–ç•¥ | `"performance"` |
| `use_deduplication` | boolean | å¯ç”¨å»é‡ | `true` |
| `historical_csvs` | array | å†å²æ•°æ®æ–‡ä»¶åˆ—è¡¨ | `["data/raw_data.csv"]` |
| `experiments` | array | å®éªŒé…ç½®åˆ—è¡¨ | **å¿…éœ€** |

---

## ğŸ”§ å®éªŒé…ç½®ç±»å‹

### 1. é»˜è®¤å€¼å®éªŒï¼ˆDefaultï¼‰

**ç”¨é€”**: å»ºç«‹åŸºçº¿ï¼Œä½¿ç”¨æ‰€æœ‰å‚æ•°çš„é»˜è®¤å€¼

**æ ¼å¼**:
```json
{
  "comment": "æ¨¡å‹å - é»˜è®¤å€¼å®éªŒ",
  "repo": "ä»“åº“å",
  "model": "æ¨¡å‹å",
  "mode": "default",
  "runs_per_config": 1
}
```

**ç¤ºä¾‹**:
```json
{
  "comment": "VulBERTa/mlp - é»˜è®¤å€¼å®éªŒ",
  "repo": "VulBERTa",
  "model": "mlp",
  "mode": "default",
  "runs_per_config": 3
}
```

### 2. éå¹¶è¡Œå•å‚æ•°å˜å¼‚ï¼ˆMutation - Nonparallelï¼‰

**ç”¨é€”**: ç ”ç©¶å•ä¸ªå‚æ•°å¯¹æ¨¡å‹çš„å½±å“

**æ ¼å¼**:
```json
{
  "comment": "æ¨¡å‹å - å‚æ•°åå˜å¼‚",
  "repo": "ä»“åº“å",
  "model": "æ¨¡å‹å",
  "mode": "mutation",
  "mutate": ["å‚æ•°å"],
  "runs_per_config": N
}
```

**ç¤ºä¾‹**:
```json
{
  "comment": "VulBERTa/mlp - learning_rateå˜å¼‚",
  "repo": "VulBERTa",
  "model": "mlp",
  "mode": "mutation",
  "mutate": ["learning_rate"],
  "runs_per_config": 5
}
```

### 3. å¹¶è¡Œæ¨¡å¼ï¼ˆParallelï¼‰

**ç”¨é€”**: å‰æ™¯æ¨¡å‹è®­ç»ƒ+åå°GPUè´Ÿè½½

#### 3a. å¹¶è¡Œé»˜è®¤å€¼å®éªŒ

```json
{
  "comment": "æ¨¡å‹å - å¹¶è¡Œ - é»˜è®¤å€¼",
  "repo": "å‰æ™¯ä»“åº“å",
  "model": "å‰æ™¯æ¨¡å‹å",
  "mode": "parallel",
  "foreground": {
    "repo": "å‰æ™¯ä»“åº“å",
    "model": "å‰æ™¯æ¨¡å‹å",
    "mode": "default"
  },
  "background": {
    "repo": "åå°ä»“åº“å",
    "model": "åå°æ¨¡å‹å",
    "hyperparameters": {}
  },
  "runs_per_config": 1
}
```

#### 3b. å¹¶è¡Œå•å‚æ•°å˜å¼‚

```json
{
  "comment": "æ¨¡å‹å - å¹¶è¡Œ - å‚æ•°åå˜å¼‚",
  "repo": "å‰æ™¯ä»“åº“å",
  "model": "å‰æ™¯æ¨¡å‹å",
  "mode": "parallel",
  "foreground": {
    "repo": "å‰æ™¯ä»“åº“å",
    "model": "å‰æ™¯æ¨¡å‹å",
    "mode": "mutation",
    "mutate": ["å‚æ•°å"]
  },
  "background": {
    "repo": "åå°ä»“åº“å",
    "model": "åå°æ¨¡å‹å",
    "hyperparameters": {}
  },
  "runs_per_config": 5
}
```

**ç¤ºä¾‹**:
```json
{
  "comment": "VulBERTa/mlp - å¹¶è¡Œ - learning_rateå˜å¼‚",
  "repo": "VulBERTa",
  "model": "mlp",
  "mode": "parallel",
  "foreground": {
    "repo": "VulBERTa",
    "model": "mlp",
    "mode": "mutation",
    "mutate": ["learning_rate"]
  },
  "background": {
    "repo": "examples",
    "model": "mnist",
    "hyperparameters": {}
  },
  "runs_per_config": 5
}
```

---

## âŒ å¸¸è§é”™è¯¯ä¸ä¿®æ­£

### é”™è¯¯1: ä½¿ç”¨`mutate_params`å¯¹è±¡

**âŒ é”™è¯¯å†™æ³•**:
```json
{
  "repo": "VulBERTa",
  "model": "mlp",
  "mutation_type": "mutation",
  "mutate_params": {
    "learning_rate": {
      "distribution": "log_uniform",
      "min": 1e-5,
      "max": 1e-3
    }
  }
}
```

**é—®é¢˜**: è¿™ç§æ ¼å¼ä¼šå¯¼è‡´å¤šä¸ªå‚æ•°åŒæ—¶å˜å¼‚

**âœ… æ­£ç¡®å†™æ³•**:
```json
{
  "repo": "VulBERTa",
  "model": "mlp",
  "mode": "mutation",
  "mutate": ["learning_rate"],
  "runs_per_config": 5
}
```

### é”™è¯¯2: ä½¿ç”¨`repository`è€Œé`repo`

**âŒ é”™è¯¯å†™æ³•**:
```json
{
  "repository": "VulBERTa",
  "model": "mlp"
}
```

**âœ… æ­£ç¡®å†™æ³•**:
```json
{
  "repo": "VulBERTa",
  "model": "mlp"
}
```

### é”™è¯¯3: ä½¿ç”¨`mutation_type`è€Œé`mode`

**âŒ é”™è¯¯å†™æ³•**:
```json
{
  "mutation_type": "mutation"
}
```

**âœ… æ­£ç¡®å†™æ³•**:
```json
{
  "mode": "mutation"
}
```

### é”™è¯¯4: å¤šå‚æ•°å˜å¼‚

**âŒ é”™è¯¯å†™æ³•**:
```json
{
  "mode": "mutation",
  "mutate": ["learning_rate", "epochs", "dropout"]
}
```

**é—®é¢˜**: è¿åå•å‚æ•°å˜å¼‚åŸåˆ™

**âœ… æ­£ç¡®å†™æ³•**: æ‹†åˆ†ä¸º3ä¸ªç‹¬ç«‹é…ç½®
```json
[
  {
    "mode": "mutation",
    "mutate": ["learning_rate"],
    "runs_per_config": 5
  },
  {
    "mode": "mutation",
    "mutate": ["epochs"],
    "runs_per_config": 5
  },
  {
    "mode": "mutation",
    "mutate": ["dropout"],
    "runs_per_config": 5
  }
]
```

---

## ğŸ“ å®Œæ•´ç¤ºä¾‹

å‚è€ƒï¼š`settings/stage2_optimized_nonparallel_and_fast_parallel.json`

```json
{
  "experiment_name": "example_config",
  "description": "ç¤ºä¾‹é…ç½®",
  "mode": "mutation",
  "max_retries": 2,
  "governor": "performance",
  "use_deduplication": true,
  "historical_csvs": ["data/raw_data.csv"],

  "experiments": [
    {
      "comment": "VulBERTa/mlp - éå¹¶è¡Œ - é»˜è®¤å€¼",
      "repo": "VulBERTa",
      "model": "mlp",
      "mode": "default",
      "runs_per_config": 1
    },
    {
      "comment": "VulBERTa/mlp - éå¹¶è¡Œ - learning_rateå˜å¼‚",
      "repo": "VulBERTa",
      "model": "mlp",
      "mode": "mutation",
      "mutate": ["learning_rate"],
      "runs_per_config": 5
    },
    {
      "comment": "VulBERTa/mlp - å¹¶è¡Œ - learning_rateå˜å¼‚",
      "repo": "VulBERTa",
      "model": "mlp",
      "mode": "parallel",
      "foreground": {
        "repo": "VulBERTa",
        "model": "mlp",
        "mode": "mutation",
        "mutate": ["learning_rate"]
      },
      "background": {
        "repo": "examples",
        "model": "mnist",
        "hyperparameters": {}
      },
      "runs_per_config": 5
    }
  ]
}
```

---

## âœ… éªŒè¯æ¸…å•

åˆ›å»ºé…ç½®æ–‡ä»¶åï¼Œä½¿ç”¨ä»¥ä¸‹æ­¥éª¤éªŒè¯ï¼š

### 1. JSONæ ¼å¼éªŒè¯
```bash
python3 -m json.tool settings/your_config.json > /dev/null && echo "âœ… JSONæ ¼å¼æ­£ç¡®" || echo "âŒ JSONæ ¼å¼é”™è¯¯"
```

### 2. å­—æ®µéªŒè¯
- [ ] ä½¿ç”¨`"repo"`è€Œé`"repository"`
- [ ] ä½¿ç”¨`"mode"`è€Œé`"mutation_type"`
- [ ] ä½¿ç”¨`"mutate": ["å‚æ•°å"]`æ•°ç»„æ ¼å¼
- [ ] æ²¡æœ‰ä½¿ç”¨`"mutate_params"`å¯¹è±¡
- [ ] æ¯ä¸ªå®éªŒåªå˜å¼‚ä¸€ä¸ªå‚æ•°

### 3. ç»“æ„éªŒè¯
- [ ] éå¹¶è¡Œæ¨¡å¼ï¼šç›´æ¥æŒ‡å®š`repo`, `model`, `mode`, `mutate`
- [ ] å¹¶è¡Œæ¨¡å¼ï¼šä½¿ç”¨`foreground`/`background`åµŒå¥—ç»“æ„
- [ ] é¡¶å±‚åŒ…å«å¿…éœ€çš„å…¨å±€å­—æ®µ

### 4. è¿è¡ŒéªŒè¯
```bash
# å¹²è¿è¡Œï¼ˆdry-runï¼‰æ£€æŸ¥é…ç½®æœ‰æ•ˆæ€§
python3 mutation.py -ec settings/your_config.json --dry-run
```

---

## ğŸš¨ ç´§æ€¥ä¿®æ­£æ­¥éª¤

å¦‚æœå‘ç°é…ç½®æ–‡ä»¶ä½¿ç”¨äº†é”™è¯¯æ ¼å¼ï¼š

1. **ç«‹å³åœæ­¢å®éªŒ** (å¦‚æœæ­£åœ¨è¿è¡Œ)
2. **å¤‡ä»½åŸé…ç½®**:
   ```bash
   cp settings/config.json settings/archived/config_é”™è¯¯æ ¼å¼_$(date +%Y%m%d).json
   ```
3. **ä½¿ç”¨æ­£ç¡®æ ¼å¼é‡å†™**
4. **è¿è¡ŒéªŒè¯æµ‹è¯•**
5. **æ›´æ–°æ–‡æ¡£è¯´æ˜**

---

## ğŸ“š å‚è€ƒèµ„æ–™

- **æ­£ç¡®ç¤ºä¾‹**: `settings/stage2_optimized_nonparallel_and_fast_parallel.json`
- **é…ç½®æŒ‡å—**: `docs/SETTINGS_CONFIGURATION_GUIDE.md`
- **æœ€ä½³å®è·µ**: `docs/JSON_CONFIG_BEST_PRACTICES.md`
- **ä¿®å¤æŠ¥å‘Š**: `docs/results_reports/PHASE4_CONFIG_FIX_REPORT.md`

---

## ğŸ” å†å²é—®é¢˜æ¡ˆä¾‹

### æ¡ˆä¾‹1: Phase 4éªŒè¯é…ç½®é”™è¯¯ (2025-12-13)

**é—®é¢˜**: ä½¿ç”¨`mutate_params`å¯¹è±¡å¯¼è‡´å¤šå‚æ•°å˜å¼‚

**å½±å“**: è¿åå•å‚æ•°å˜å¼‚åŸåˆ™ï¼Œæ•°æ®æ— æ³•ç”¨äºåˆ†æ

**ä¿®æ­£**: å°†`mutate_params`æ”¹ä¸º`mutate`æ•°ç»„

**è¯¦ç»†**: `docs/results_reports/PHASE4_CONFIG_FIX_REPORT.md`

---

**æ–‡æ¡£ç»´æŠ¤è€…**: Green + Claude (AI Assistant)
**æœ€åæ›´æ–°**: 2025-12-13
**ç‰ˆæœ¬**: 1.0
