# Stage7-13é…ç½®æ–‡ä»¶Bugåˆ†ææŠ¥å‘Š

**æ—¥æœŸ**: 2025-12-07
**ç‰ˆæœ¬**: v4.7.1ï¼ˆå¾…å‘å¸ƒï¼‰
**ä¸¥é‡ç­‰çº§**: ğŸ”´ CRITICAL - å¯¼è‡´70.8%å®éªŒç¼ºå¤±
**çŠ¶æ€**: å¾…ä¿®å¤

---

## ğŸ” é—®é¢˜æ¦‚è¿°

Stage7-13æ‰€æœ‰é…ç½®æ–‡ä»¶å­˜åœ¨**é…ç½®è¯­ä¹‰è¯¯è§£**ï¼Œå¯¼è‡´å®é™…è¿è¡Œå®éªŒæ•°ä»…ä¸ºé¢„æœŸçš„29.2%ã€‚

### å½±å“ç»Ÿè®¡

| Stage | é¢„æœŸå®éªŒæ•° | å®é™…å®éªŒæ•° | ç¼ºå¤±æ•° | ç¼ºå¤±ç‡ | çŠ¶æ€ |
|-------|-----------|----------|-------|-------|------|
| Stage7 | 199 | 48 | 151 | 75.9% | âŒ å·²è¿è¡Œé”™è¯¯ç‰ˆæœ¬ |
| Stage8 | 48 | 12 | 36 | 75.0% | âŒ å·²è¿è¡Œé”™è¯¯ç‰ˆæœ¬ |
| Stage9 | 20 | 5 | 15 | 75.0% | ğŸ”µ æœªè¿è¡Œ |
| Stage10 | 20 | 5 | 15 | 75.0% | ğŸ”µ æœªè¿è¡Œ |
| Stage11 | 20 | 5 | 15 | 75.0% | ğŸ”µ æœªè¿è¡Œ |
| Stage12 | 20 | 5 | 15 | 75.0% | ğŸ”µ æœªè¿è¡Œ |
| Stage13 | 43 | 28 | 15 | 34.9% | ğŸ”µ æœªè¿è¡Œ |
| **æ€»è®¡** | **370** | **108** | **262** | **70.8%** | - |

### å®é™…æ‰§è¡Œè®°å½•

- **Stage7**: 2025-12-06 22:02å®Œæˆï¼Œ0.74å°æ—¶ï¼Œ7ä¸ªå®éªŒï¼ˆé¢„æœŸ199ä¸ªï¼‰
- **Stage8**: 2025-12-07 12:32å®Œæˆï¼Œ~13å°æ—¶ï¼Œ12ä¸ªå®éªŒï¼ˆé¢„æœŸ48ä¸ªï¼‰

---

## ğŸ› æ ¹æœ¬åŸå› 

### è¯­ä¹‰è¯¯è§£

**é”™è¯¯ç†è§£**ï¼š
```json
{
  "runs_per_config": 7,
  "mutate_params": ["epochs", "learning_rate", "seed", "weight_decay"]
}
```
ç†è§£ä¸ºï¼š"æ¯ä¸ªå‚æ•°è¿è¡Œ7æ¬¡" = 4å‚æ•° Ã— 7æ¬¡ = 28å®éªŒ

**å®é™…è¡Œä¸º**ï¼š
- `generate_mutations(num_mutations=7, mutate_params=[4ä¸ªå‚æ•°])`
- ç”Ÿæˆ7ä¸ªmutationsï¼Œæ¯ä¸ªmutationåŒ…å«**æ‰€æœ‰4ä¸ªå‚æ•°**çš„å˜å¼‚å€¼
- **ç»“æœ**ï¼š7ä¸ªå®éªŒï¼Œè€Œé28ä¸ª

### ä»£ç é€»è¾‘éªŒè¯

`mutation/hyperparams.py` ç¬¬180-279è¡Œï¼š
```python
def generate_mutations(
    supported_params: Dict,
    mutate_params: List[str],
    num_mutations: int = 1,
    ...
) -> List[Dict[str, Any]]:
    # ç”Ÿæˆnum_mutationsä¸ªmutations
    # æ¯ä¸ªmutationåŒ…å«æ‰€æœ‰mutate_paramsçš„å˜å¼‚å€¼
```

`mutation/runner.py` ç¬¬1122-1130è¡Œï¼š
```python
mutations = generate_mutations(
    supported_params=supported_params,
    mutate_params=mutate_params,  # æ‰€æœ‰è¦å˜å¼‚çš„å‚æ•°
    num_mutations=exp_runs_per_config,  # ç”Ÿæˆå‡ ä¸ªmutations
    ...
)
```

### æ­£ç¡®çš„é…ç½®æ¨¡å¼

å‚è€ƒStage2ï¼ˆå·²éªŒè¯æ­£ç¡®ï¼‰ï¼š
```json
{
  "repo": "MRT-OAST",
  "model": "default",
  "runs_per_config": 2,
  "mutate_params": ["epochs"]  // âœ… åªmutate 1ä¸ªå‚æ•°
},
{
  "repo": "Person_reID_baseline_pytorch",
  "model": "hrnet18",
  "runs_per_config": 2,
  "mutate_params": ["learning_rate"]  // âœ… å¦ä¸€ä¸ªå‚æ•°ç‹¬ç«‹é…ç½®
}
```

**æ­£ç¡®è¯­ä¹‰**ï¼š
- `runs_per_config=N`ï¼šè¿™ä¸ªé…ç½®é¡¹è¿è¡ŒNæ¬¡
- `mutate_params=[param1, param2]`ï¼šæ¯æ¬¡è¿è¡ŒåŒæ—¶å˜å¼‚param1å’Œparam2
- å¦‚æœè¦"æ¯ä¸ªå‚æ•°ç‹¬ç«‹è¿è¡ŒNæ¬¡"ï¼Œéœ€è¦åˆ›å»ºå¤šä¸ªé…ç½®é¡¹

---

## ğŸ“Š è¯¦ç»†é”™è¯¯åˆ†æ

### Stage7ï¼šéå¹¶è¡Œå¿«é€Ÿæ¨¡å‹

**é…ç½®å†…å®¹**ï¼ˆ7ä¸ªå®éªŒé¡¹ï¼‰ï¼š
```json
{
  "repo": "examples",
  "model": "mnist",
  "runs_per_config": 7,
  "mutate_params": ["epochs", "learning_rate", "batch_size", "seed"]
}
// ... å…¶ä»–6ä¸ªç±»ä¼¼
```

**é—®é¢˜**ï¼š
- 7ä¸ªé…ç½®é¡¹ï¼Œæ¯ä¸ªåŒ…å«4-5ä¸ªå‚æ•°
- é¢„æœŸï¼š7æ¨¡å‹ Ã— 4-5å‚æ•° Ã— 6-7æ¬¡ = 199å®éªŒ
- å®é™…ï¼š7ä¸ªé…ç½® Ã— 6-7æ¬¡ = 48å®éªŒ
- **ç¼ºå¤±**ï¼š151å®éªŒï¼ˆ75.9%ï¼‰

### Stage8ï¼šéå¹¶è¡Œä¸­æ…¢é€Ÿæ¨¡å‹

**é…ç½®å†…å®¹**ï¼ˆ2ä¸ªå®éªŒé¡¹ï¼‰ï¼š
```json
{
  "repo": "VulBERTa",
  "model": "mlp",
  "runs_per_config": 7,
  "mutate_params": ["epochs", "learning_rate", "seed", "weight_decay"]
},
{
  "repo": "Person_reID_baseline_pytorch",
  "model": "densenet121",
  "runs_per_config": 5,
  "mutate_params": ["epochs", "learning_rate", "seed", "dropout"]
}
```

**é—®é¢˜**ï¼š
- 2ä¸ªé…ç½®é¡¹ï¼Œæ¯ä¸ªåŒ…å«4ä¸ªå‚æ•°
- é¢„æœŸï¼š2æ¨¡å‹ Ã— 4å‚æ•° Ã— 5-7æ¬¡ = 48å®éªŒ
- å®é™…ï¼šVulBERTa 7æ¬¡ + densenet121 5æ¬¡ = 12å®éªŒ
- **ç¼ºå¤±**ï¼š36å®éªŒï¼ˆ75.0%ï¼‰

### Stage9-12ï¼šç±»ä¼¼æ¨¡å¼

æ¯ä¸ªStageéƒ½æ˜¯1ä¸ªé…ç½®é¡¹åŒ…å«4ä¸ªå‚æ•°ï¼š
- é¢„æœŸï¼š1æ¨¡å‹ Ã— 4å‚æ•° Ã— 5æ¬¡ = 20å®éªŒ
- å®é™…ï¼š1ä¸ªé…ç½® Ã— 5æ¬¡ = 5å®éªŒ
- **ç¼ºå¤±**ï¼š15å®éªŒ/Stageï¼ˆ75.0%ï¼‰

### Stage13ï¼šéƒ¨åˆ†æ­£ç¡®

6ä¸ªé…ç½®é¡¹ï¼Œå…¶ä¸­5ä¸ªæ­£ç¡®ï¼ˆå•å‚æ•°ï¼‰ï¼Œ1ä¸ªé”™è¯¯ï¼ˆ4å‚æ•°ï¼‰ï¼š
- é”™è¯¯é¡¹ï¼šmnist_ffï¼Œ5æ¬¡ Ã— 4å‚æ•°ï¼Œç¼ºå¤±15å®éªŒ
- æ­£ç¡®é¡¹ï¼šå…¶ä»–5ä¸ªï¼Œå…±23å®éªŒ
- é¢„æœŸï¼š43å®éªŒï¼Œå®é™…ï¼š28å®éªŒ
- **ç¼ºå¤±**ï¼š15å®éªŒï¼ˆ34.9%ï¼‰

---

## âš ï¸ å®é™…è¿è¡Œå½±å“

### Stage7å·²è¿è¡Œç»“æœ

**è¿è¡Œæ—¶é—´**ï¼š2025-12-06 21:51-22:02ï¼ˆ0.74å°æ—¶ï¼‰
- é¢„æœŸæ—¶é—´ï¼š38.3å°æ—¶
- å®é™…æ—¶é—´ï¼š0.74å°æ—¶ï¼ˆ1.9%ï¼‰
- **æ—¶é—´èŠ‚çœ**ï¼š37.56å°æ—¶ï¼ˆä½†è¿™æ˜¯å› ä¸ºç¼ºå¤±å®éªŒï¼‰

**å®éªŒæ•°é‡**ï¼š
- é¢„æœŸï¼š199ä¸ªå®éªŒ
- å®é™…ï¼š7ä¸ªå®éªŒï¼ˆ3.5%ï¼‰
- å»é‡ï¼šè·³è¿‡0ä¸ªï¼ˆé…ç½®é”™è¯¯å¯¼è‡´æ²¡æœ‰è¶³å¤Ÿå®éªŒå»é‡ï¼‰

**æ•°æ®è´¨é‡å½±å“**ï¼š
- æ‰€æœ‰7ä¸ªå®éªŒéƒ½æ˜¯**æ··åˆå˜å¼‚**ï¼ˆ4å‚æ•°åŒæ—¶å˜å¼‚ï¼‰
- æ— æ³•åˆ†æå•ä¸ªå‚æ•°å¯¹èƒ½è€—/æ€§èƒ½çš„ç‹¬ç«‹å½±å“
- æ•°æ®åˆ†æä»·å€¼å¤§å¹…é™ä½

### Stage8å·²è¿è¡Œç»“æœ

**è¿è¡Œæ—¶é—´**ï¼š2025-12-06 21:51-2025-12-07 12:32ï¼ˆ~13å°æ—¶ï¼‰
- é¢„æœŸæ—¶é—´ï¼š35.1å°æ—¶
- å®é™…æ—¶é—´ï¼š~13å°æ—¶ï¼ˆ37.0%ï¼‰
- **æ—¶é—´å·®å¼‚**ï¼š22.1å°æ—¶èŠ‚çœï¼ˆå› ç¼ºå¤±å®éªŒï¼‰

**å®éªŒæ•°é‡**ï¼š
- é¢„æœŸï¼š48ä¸ªå®éªŒ
- å®é™…ï¼š12ä¸ªå®éªŒï¼ˆ25.0%ï¼‰
- VulBERTa/mlp: 7ä¸ªæ··åˆå˜å¼‚å®éªŒ
- densenet121: 5ä¸ªæ··åˆå˜å¼‚å®éªŒ

**å·²å®Œæˆå®éªŒåˆ†æ**ï¼š
```
VulBERTa/mlp: 7ä¸ªå®éªŒ
- æ¯ä¸ªå®éªŒåŒæ—¶å˜å¼‚: epochs, learning_rate, seed, weight_decay
- è®­ç»ƒæ—¶é—´ï¼š3538-5990ç§’ï¼ˆ0.98-1.66å°æ—¶ï¼‰
- èƒ½è€—ï¼š110-187 kJ (CPU), 774-1310 kJ (GPU)

densenet121: 5ä¸ªå®éªŒ
- æ¯ä¸ªå®éªŒåŒæ—¶å˜å¼‚: epochs, learning_rate, seed, dropout
- è®­ç»ƒæ—¶é—´ï¼š2557-4891ç§’ï¼ˆ0.71-1.36å°æ—¶ï¼‰
- æ€§èƒ½ï¼šmAP 0.718-0.740, Rank1 0.885-0.900
```

---

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šæ‹†åˆ†é…ç½®é¡¹ï¼ˆæ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- âœ… ç¬¦åˆåŸå§‹è®¾è®¡æ„å›¾
- âœ… å¯åˆ†ææ¯ä¸ªå‚æ•°çš„ç‹¬ç«‹å½±å“
- âœ… ä¸Stage2é…ç½®é£æ ¼ä¸€è‡´

**ç¼ºç‚¹**ï¼š
- âŒ é…ç½®æ–‡ä»¶å˜å¤§ï¼ˆä»7é¡¹â†’31é¡¹ï¼ŒStage7ä¸ºä¾‹ï¼‰
- âŒ å»é‡æ•ˆç‡å¯èƒ½é™ä½ï¼ˆå•å‚æ•°å˜å¼‚é‡å¤æ¦‚ç‡æ›´é«˜ï¼‰

**å®æ–½**ï¼š
```json
// åŸé…ç½®ï¼š1ä¸ªé…ç½®é¡¹
{
  "repo": "VulBERTa",
  "model": "mlp",
  "runs_per_config": 7,
  "mutate_params": ["epochs", "learning_rate", "seed", "weight_decay"]
}

// ä¿®å¤åï¼š4ä¸ªé…ç½®é¡¹
{
  "repo": "VulBERTa",
  "model": "mlp",
  "runs_per_config": 7,
  "mutate_params": ["epochs"],
  "comment": "ä»…å˜å¼‚epochså‚æ•°"
},
{
  "repo": "VulBERTa",
  "model": "mlp",
  "runs_per_config": 7,
  "mutate_params": ["learning_rate"],
  "comment": "ä»…å˜å¼‚learning_rateå‚æ•°"
},
{
  "repo": "VulBERTa",
  "model": "mlp",
  "runs_per_config": 7,
  "mutate_params": ["seed"],
  "comment": "ä»…å˜å¼‚seedå‚æ•°"
},
{
  "repo": "VulBERTa",
  "model": "mlp",
  "runs_per_config": 7,
  "mutate_params": ["weight_decay"],
  "comment": "ä»…å˜å¼‚weight_decayå‚æ•°"
}
```

### æ–¹æ¡ˆ2ï¼šè°ƒæ•´runs_per_config

**æ€è·¯**ï¼šå°†`runs_per_config`ä¹˜ä»¥å‚æ•°æ•°é‡

**é—®é¢˜**ï¼š
- âŒ ä»ç„¶æ˜¯æ··åˆå˜å¼‚ï¼Œæ— æ³•åˆ†æå•å‚æ•°å½±å“
- âŒ ä¸ç¬¦åˆåŸå§‹è®¾è®¡æ„å›¾
- âŒ æ•°æ®åˆ†æä»·å€¼ä½

**ä¸æ¨è**

### æ–¹æ¡ˆ3ï¼šä¿æŒç°çŠ¶ï¼Œè°ƒæ•´é¢„æœŸ

**æ€è·¯**ï¼šæ‰¿è®¤é…ç½®é”™è¯¯ï¼Œè°ƒæ•´æ–‡æ¡£ä¸­çš„é¢„æœŸå®éªŒæ•°

**é—®é¢˜**ï¼š
- âŒ æ— æ³•å®Œæˆå®éªŒç›®æ ‡ï¼ˆæ¯ä¸ªå‚æ•°5ä¸ªå”¯ä¸€å€¼ï¼‰
- âŒ æ•°æ®è´¨é‡å·®ï¼ˆæ··åˆå˜å¼‚ï¼‰
- âŒ æµªè´¹å·²æŠ•å…¥çš„è®¾è®¡æ—¶é—´

**ä¸æ¨è**

---

## ğŸ“ æ¨èè¡ŒåŠ¨è®¡åˆ’

### ç«‹å³è¡ŒåŠ¨ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

1. **ä¿®å¤æ‰€æœ‰Stage7-13é…ç½®æ–‡ä»¶**
   - ä½¿ç”¨æ–¹æ¡ˆ1ï¼šæ‹†åˆ†é…ç½®é¡¹
   - æ¯ä¸ªå‚æ•°åˆ›å»ºç‹¬ç«‹é…ç½®é¡¹
   - æ›´æ–°estimated_experimentså­—æ®µ

2. **é‡æ–°è¿è¡ŒStage7å’ŒStage8**
   - Stage7å·²è¿è¡Œçš„7ä¸ªå®éªŒä¿ç•™ï¼ˆä½œä¸ºæ··åˆå˜å¼‚æ•°æ®ï¼‰
   - Stage8å·²è¿è¡Œçš„12ä¸ªå®éªŒä¿ç•™
   - ä½¿ç”¨ä¿®å¤åçš„é…ç½®é‡æ–°è¿è¡Œ
   - é¢„è®¡æ–°å¢æ—¶é—´ï¼šStage7 +37å°æ—¶ï¼ŒStage8 +22å°æ—¶

3. **éªŒè¯å»é‡æœºåˆ¶**
   - ç¡®ä¿å†å²æ··åˆå˜å¼‚æ•°æ®ä¸å½±å“æ–°å•å‚æ•°å®éªŒ
   - æµ‹è¯•å»é‡keyæ˜¯å¦æ­£ç¡®åŒºåˆ†å•/å¤šå‚æ•°å˜å¼‚

### ä¸­æœŸæ”¹è¿›ï¼ˆå»ºè®®ï¼‰

4. **æ·»åŠ é…ç½®éªŒè¯å·¥å…·**
   - æ£€æµ‹å¤šå‚æ•°mutateé…ç½®
   - è­¦å‘Šestimated_experimentsä¸å®é™…ä¸ç¬¦
   - è‡ªåŠ¨è®¡ç®—å®é™…å®éªŒæ•°

5. **æ›´æ–°æ–‡æ¡£**
   - SETTINGS_CONFIGURATION_GUIDE.mdæ·»åŠ æœ€ä½³å®è·µ
   - æ˜ç¡®è¯´æ˜runs_per_configè¯­ä¹‰
   - æä¾›æ­£ç¡®/é”™è¯¯é…ç½®ç¤ºä¾‹

### é•¿æœŸä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰

6. **ä»£ç å¢å¼º**
   - æ·»åŠ é…ç½®åŠ è½½æ—¶çš„è­¦å‘Š
   - å¦‚æœmutate_params>1ï¼Œæ‰“å°è­¦å‘Šä¿¡æ¯
   - å»ºè®®ç”¨æˆ·æ˜¯å¦ç¡®è®¤æ··åˆå˜å¼‚

---

## ğŸ“š å‚è€ƒèµ„æ–™

- **é…ç½®æ–‡ä»¶**ï¼š
  - `settings/stage7_nonparallel_fast_models.json`ï¼ˆå¾…ä¿®å¤ï¼‰
  - `settings/stage8_nonparallel_medium_slow_models.json`ï¼ˆå¾…ä¿®å¤ï¼‰
  - `settings/stage2_optimized_nonparallel_and_fast_parallel.json`ï¼ˆæ­£ç¡®ç¤ºä¾‹ï¼‰

- **ä»£ç æ–‡ä»¶**ï¼š
  - `mutation/runner.py:1095-1147`ï¼ˆmutationæ¨¡å¼å¤„ç†ï¼‰
  - `mutation/hyperparams.py:180-279`ï¼ˆgenerate_mutationså‡½æ•°ï¼‰

- **æ‰§è¡Œç»“æœ**ï¼š
  - `results/run_20251205_211726/`ï¼ˆStage7ï¼Œ7ä¸ªå®éªŒï¼‰
  - `results/run_20251206_215133/`ï¼ˆStage8ï¼Œ12ä¸ªå®éªŒï¼‰
  - `results/summary_all.csv`ï¼ˆ400è¡Œï¼ŒåŒ…å«19ä¸ªé”™è¯¯å®éªŒï¼‰

---

**æŠ¥å‘Šä½œè€…**: Claude Code Assistant
**å®¡æ ¸çŠ¶æ€**: å¾…ç”¨æˆ·ç¡®è®¤
**ä¸‹ä¸€æ­¥**: ç­‰å¾…æ‰¹å‡†åæ‰§è¡Œä¿®å¤æ–¹æ¡ˆ1
