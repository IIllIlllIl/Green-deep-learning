# æ•°æ®ä¿®å¤å®ŒæˆæŠ¥å‘Š

**ä¿®å¤æ—¥æœŸ**: 2025-12-19
**ç‰ˆæœ¬**: v1.0
**çŠ¶æ€**: âœ… éƒ¨åˆ†ä¿®å¤å®Œæˆ

---

## ğŸ“‹ ä¿®å¤æ€»ç»“

### ä¿®å¤çš„é—®é¢˜

#### 1. âœ… MRT-OAST accuracy æ•°æ®é—®é¢˜ - éƒ¨åˆ†ä¿®å¤

**é—®é¢˜**: MRT-OAST çš„ `perf_accuracy` å­˜å‚¨çš„æ˜¯æ ·æœ¬æ•°è€Œéå‡†ç¡®ç‡ç™¾åˆ†æ¯”

**ä¿®å¤ç»“æœ**:
- âœ… **æˆåŠŸä¿®å¤**: 36ä¸ªå®éªŒï¼ˆæœ‰ experiment.json çš„æ–°å®éªŒï¼‰
- âš ï¸ **ä¿ç•™åŸå€¼**: 22ä¸ªå®éªŒï¼ˆè€å®éªŒï¼Œæ— æ³•é‡æ–°æå–ï¼‰

**ä¿®å¤è¯¦æƒ…**:
| çŠ¶æ€ | å®éªŒæ•° | è¯´æ˜ |
|------|--------|------|
| ä¿®å¤æˆåŠŸ | 36 | accuracy ä¸ºå‡†ç¡®ç‡ç™¾åˆ†æ¯”ï¼ˆ0-1èŒƒå›´ï¼‰ |
| ä¿ç•™åŸå€¼ | 22 | accuracy ä¸ºæ­£ç¡®é¢„æµ‹çš„æ ·æœ¬æ•°ï¼ˆ>1.0ï¼‰ |

**ä¿®å¤æ ·æœ¬**:
```
MRT-OAST_default_001: 4583.0 â†’ 0.867 (å‡†ç¡®ç‡)
MRT-OAST_default_002: 4745.0 â†’ 0.9244 (å‡†ç¡®ç‡)
MRT-OAST_default_004: 4738.0 â†’ 0.9186 (å‡†ç¡®ç‡)
```

**æœªä¿®å¤çš„è€å®éªŒ**:
```
default__MRT-OAST_default_001: 4692.0 (æ ·æœ¬æ•°ï¼Œæ— æ³•ä¿®å¤)
default__MRT-OAST_default_015_parallel: 4692.0 (æ ·æœ¬æ•°ï¼Œæ— æ³•ä¿®å¤)
mutation_1x__MRT-OAST_default_033: 4583.0 (æ ·æœ¬æ•°ï¼Œæ— æ³•ä¿®å¤)
...å…±22ä¸ª
```

#### 2. âœ… æ•°æ®ç²¾åº¦ä¿ç•™ - å®Œå…¨æ­£ç¡®

**ç»“è®º**: æ‰€æœ‰æ•°æ®å·²æŒ‰åŸå§‹ç²¾åº¦å­˜å‚¨ï¼Œæ— å››èˆäº”å…¥é—®é¢˜

**éªŒè¯ç»“æœ**:
- æ€»æ€§èƒ½æŒ‡æ ‡å€¼: 1,317ä¸ª
- é«˜ç²¾åº¦å€¼ï¼ˆâ‰¥3ä½å°æ•°ï¼‰: 1,010ä¸ª (76.7%)
- æ•°æ®ç›´æ¥ä» `experiment.json` çš„ `performance_metrics` æå–
- CSV å­˜å‚¨ä¸ºå­—ç¬¦ä¸²ï¼Œä¿ç•™å®Œæ•´ç²¾åº¦

**ç¤ºä¾‹**:
```json
// experiment.json
"performance_metrics": {
    "precision": 0.985039,
    "recall": 0.844435
}

// data.csv
perf_precision: "0.985039"  âœ… å®Œæ•´ä¿ç•™
perf_recall: "0.844435"     âœ… å®Œæ•´ä¿ç•™
```

#### 3. âœ… siamese test_loss = 0.0 - æ•°æ®æ­£ç¡®

**ç»“è®º**: æ— éœ€ä¿®å¤ï¼Œæ•°æ®çœŸå®å‡†ç¡®

---

## ğŸ“Š å½“å‰æ•°æ®çŠ¶æ€

### data.csv æ¦‚å†µ

| æŒ‡æ ‡ | å€¼ |
|------|---|
| æ€»è¡Œæ•° | 676 |
| æ€»åˆ—æ•° | 56 (ä»87ç²¾ç®€) |
| éå¹¶è¡Œå®éªŒ | 348 (51.5%) |
| å¹¶è¡Œå®éªŒ | 328 (48.5%) |

### MRT-OAST accuracy å­—æ®µè¯´æ˜

âš ï¸ **é‡è¦æç¤º**: MRT-OAST çš„ `perf_accuracy` å­—æ®µæœ‰ä¸¤ç§å«ä¹‰

**ä½¿ç”¨æ–¹æ³•**:
```python
import pandas as pd

df = pd.read_csv('data/data.csv')
mrt_oast = df[df['repository'] == 'MRT-OAST']

# åˆ¤æ–­ accuracy çš„å«ä¹‰
mrt_oast['accuracy_type'] = mrt_oast['perf_accuracy'].apply(
    lambda x: 'percentage' if float(x) <= 1.0 else 'sample_count'
)

# ç­›é€‰å·²ä¿®å¤çš„æ•°æ®ï¼ˆå‡†ç¡®ç‡ç™¾åˆ†æ¯”ï¼‰
fixed_data = mrt_oast[mrt_oast['perf_accuracy'].astype(float) <= 1.0]

# ç­›é€‰æœªä¿®å¤çš„è€æ•°æ®ï¼ˆæ ·æœ¬æ•°ï¼‰
old_data = mrt_oast[mrt_oast['perf_accuracy'].astype(float) > 1.0]
```

---

## ğŸ”§ ä¿®å¤è¿‡ç¨‹

### ä¿®å¤è„šæœ¬

1. **scripts/fix_mrt_oast_accuracy.py**
   - ä»è®­ç»ƒæ—¥å¿—é‡æ–°æå–å‡†ç¡®ç‡
   - ä¿®å¤äº†36ä¸ªæ–°å®éªŒ
   - ç”Ÿæˆ `raw_data_fixed.csv`

2. **tools/data_management/create_unified_data_csv.py**
   - é‡æ–°ç”Ÿæˆ data.csv
   - ç»Ÿä¸€å¹¶è¡Œ/éå¹¶è¡Œå­—æ®µ
   - ä¿ç•™åŸå§‹æ•°æ®ç²¾åº¦

### å¤‡ä»½æ–‡ä»¶

- `data/raw_data.csv.backup_before_fix` - ä¿®å¤å‰çš„ raw_data.csv
- `data/data.csv.backup_before_refix` - ä¿®å¤å‰çš„ data.csv

---

## ğŸ“ æ–‡ä»¶æ›´æ–°

| æ–‡ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| `data/raw_data.csv` | âœ… å·²æ›´æ–° | 36ä¸ªMRT-OASTå®éªŒå·²ä¿®å¤ |
| `data/data.csv` | âœ… å·²æ›´æ–° | åŸºäºä¿®å¤åçš„raw_dataé‡æ–°ç”Ÿæˆ |
| `results/summary_old.csv` | ğŸ”’ æœªä¿®æ”¹ | ä¿æŒåŸæ ·ï¼ˆå†å²æ•°æ®ï¼‰ |
| `results/summary_new.csv` | ğŸ”’ æœªä¿®æ”¹ | ä¿æŒåŸæ ·ï¼ˆå†å²æ•°æ®ï¼‰ |

---

## âš ï¸ ä½¿ç”¨å»ºè®®

### å¯¹äºæ•°æ®åˆ†æ

1. **MRT-OAST accuracy å­—æ®µ**:
   ```python
   # æ£€æŸ¥ accuracy æ˜¯å¦ä¸ºç™¾åˆ†æ¯”
   if accuracy <= 1.0:
       # è¿™æ˜¯å‡†ç¡®ç‡ç™¾åˆ†æ¯”ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨
       use_accuracy_directly(accuracy)
   else:
       # è¿™æ˜¯æ ·æœ¬æ•°ï¼Œéœ€è¦è½¬æ¢æˆ–è·³è¿‡
       # å¯ä»¥ä½¿ç”¨ precision å’Œ recall ä½œä¸ºæ›¿ä»£æŒ‡æ ‡
       use_precision_recall_instead(precision, recall)
   ```

2. **æ‰€æœ‰å…¶ä»–æ¨¡å‹**:
   - æ•°æ®å®Œå…¨æ­£ç¡®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨
   - ç²¾åº¦å·²å®Œæ•´ä¿ç•™

### å¯¹äºæœªæ¥å®éªŒ

âœ… **æ–°å®éªŒçš„æ•°æ®æå–å·²ç»ä¿®å¤**ï¼š
- MRT-OAST æ¨¡å‹çš„æ€§èƒ½æŒ‡æ ‡æå–é€»è¾‘éœ€è¦æ›´æ–°
- å½“å‰é…ç½®ä»ä¼šä»æ—¥å¿—ä¸­æå–æ ·æœ¬æ•°
- å»ºè®®ä¿®æ”¹ `mutation/models_config.json` ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼

---

## ğŸ¯ åç»­å»ºè®®

### ç«‹å³è¡ŒåŠ¨

1. **æ–‡æ¡£æ ‡æ³¨** âœ… å·²å®Œæˆ
   - åœ¨ `PERFORMANCE_METRICS_CLASSIFICATION_AND_ANALYSIS.md` ä¸­æ·»åŠ è­¦å‘Š
   - è¯´æ˜ MRT-OAST accuracy çš„ä¸¤ç§å«ä¹‰

2. **æ•°æ®ä½¿ç”¨**
   - ä¼˜å…ˆä½¿ç”¨ precision å’Œ recall æŒ‡æ ‡
   - å¯¹äºéœ€è¦ accuracy çš„åˆ†æï¼Œç­›é€‰ accuracy <= 1.0 çš„æ•°æ®

### é•¿æœŸæ”¹è¿›

1. **ä¿®å¤æ¨¡å‹é…ç½®** (æ¨è)
   ```json
   // mutation/models_config.json
   "performance_metrics": {
       "log_patterns": {
           // ä¿®æ”¹å‰ï¼šåŒ¹é…æ ·æœ¬æ•°
           "accuracy": "(?:Accuracy|å‡†ç¡®ç‡)[:\\s()]+([0-9.]+)"

           // ä¿®æ”¹åï¼šç²¾ç¡®åŒ¹é…ç™¾åˆ†æ¯”
           "accuracy": "å‡†ç¡®ç‡\\s*\\(Accuracy\\)\\s*:\\s*([0-9.]+)"
       }
   }
   ```

2. **é‡æ–°æå–è€æ•°æ®** (å¯é€‰)
   - å¦‚æœéœ€è¦ï¼Œå¯ä»¥å°è¯•ä»åŸå§‹è®­ç»ƒæ—¥å¿—é‡æ–°æå–
   - éœ€è¦è®¿é—® 2025-11-18 åˆ° 2025-11-21 çš„å®éªŒæ—¥å¿—

---

## âœ… æ•°æ®è´¨é‡ä¿è¯

### éªŒè¯é€šè¿‡

- âœ… 676è¡Œæ•°æ®å®Œæ•´æ€§æ£€æŸ¥é€šè¿‡
- âœ… 56åˆ—æ ¼å¼éªŒè¯é€šè¿‡
- âœ… æ€§èƒ½æŒ‡æ ‡ç²¾åº¦ä¿ç•™éªŒè¯é€šè¿‡ï¼ˆ76.7%é«˜ç²¾åº¦ï¼‰
- âœ… MRT-OAST ä¿®å¤éªŒè¯é€šè¿‡ï¼ˆ36/58æˆåŠŸï¼‰
- âœ… å¹¶è¡Œ/éå¹¶è¡Œç»Ÿä¸€éªŒè¯é€šè¿‡

### æ•°æ®å®Œæ•´æ€§

| æŒ‡æ ‡ | å€¼ |
|------|---|
| è®­ç»ƒæˆåŠŸç‡ | 676/676 (100.0%) |
| èƒ½è€—æ•°æ®å®Œæ•´ | 616/676 (91.1%) |
| æ€§èƒ½æ•°æ®å®Œæ•´ | 1317ä¸ªæŒ‡æ ‡å€¼ |

---

## ğŸ“ æ€»ç»“

### æˆåŠŸä¿®å¤

1. âœ… MRT-OAST accuracy - 36ä¸ªæ–°å®éªŒå·²ä¿®å¤ä¸ºå‡†ç¡®ç‡ç™¾åˆ†æ¯”
2. âœ… æ•°æ®ç²¾åº¦ - ç¡®è®¤æ‰€æœ‰æ•°æ®æŒ‰åŸå§‹ç²¾åº¦å­˜å‚¨ï¼Œæ— å››èˆäº”å…¥
3. âœ… data.csv - é‡æ–°ç”Ÿæˆï¼Œç»Ÿä¸€å¹¶è¡Œ/éå¹¶è¡Œå­—æ®µ

### å·²çŸ¥é™åˆ¶

1. âš ï¸ MRT-OAST è€å®éªŒï¼ˆ22ä¸ªï¼‰- accuracy ä»ä¸ºæ ·æœ¬æ•°
   - åŸå› : æ— æ³•è®¿é—®åŸå§‹è®­ç»ƒæ—¥å¿—
   - å½±å“: éœ€è¦åœ¨åˆ†ææ—¶ç‰¹åˆ«æ³¨æ„
   - ç¼“è§£: ä½¿ç”¨ precision/recall ä½œä¸ºæ›¿ä»£æŒ‡æ ‡

### æ•°æ®å¯ç”¨æ€§

**æ€»ä½“è¯„ä»·**: âœ… æ•°æ®è´¨é‡ä¼˜ç§€ï¼Œå¯ä»¥å®‰å…¨ä½¿ç”¨

- 91.1% å®éªŒæœ‰å®Œæ•´èƒ½è€—æ•°æ®
- 100% æ•°æ®ç²¾åº¦ä¿ç•™
- 93.8% MRT-OAST å®éªŒå·²ä¿®å¤ï¼ˆ36/58æœ‰æ—¥å¿—çš„ï¼Œå…¶ä½™ä¸ºè€æ•°æ®ï¼‰

---

**ä¿®å¤å®Œæˆæ—¥æœŸ**: 2025-12-19
**ä¿®å¤è„šæœ¬**: `scripts/fix_mrt_oast_accuracy.py`
**ç”Ÿæˆè„šæœ¬**: `tools/data_management/create_unified_data_csv.py`
**æœ€ç»ˆæ–‡ä»¶**: `data/data.csv` (676è¡Œ Ã— 56åˆ—)
