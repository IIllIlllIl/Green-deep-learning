# CSVç©ºå€¼ä¿®å¤æ–¹æ¡ˆæ€»ç»“

**æ—¥æœŸ**: 2025-12-11
**ç‰ˆæœ¬**: v2.0 (ä¿®è®¢ç‰ˆ)
**çŠ¶æ€**: âœ… å·²å®ç°å¹¶æµ‹è¯•

---

## ğŸ“‹ ä¿®æ­£åçš„æ–¹æ¡ˆ

æ ¹æ®ç”¨æˆ·åé¦ˆï¼Œä¿®æ­£äº†åŸæ–¹æ¡ˆï¼š

### æ ¸å¿ƒä¿®æ”¹

1. **`experiment_source` åˆ—**
   - âŒ æ—§æ–¹æ¡ˆï¼šä¿®æ”¹ä¸º `{source}/{mutated_param}` æ ¼å¼
   - âœ… æ–°æ–¹æ¡ˆï¼šä» `results/run_*/` ç›®å½•ä¸‹çš„å®é™…æ–‡ä»¶å¤¹åæ¨æ–­source
   - é€»è¾‘ï¼š
     - `default__*` â†’ `default`
     - `mutation_1x__*` â†’ `mutation_1x`
     - å…¶ä»– â†’ ç©ºå­—ç¬¦ä¸²

2. **æ–°å¢ `mutated_param` åˆ—**
   - ä½ç½®ï¼š`experiment_source` åˆ—åé¢
   - å†…å®¹ï¼šé€šè¿‡æ¯”è¾ƒè¶…å‚æ•°ä¸é»˜è®¤å€¼è¯†åˆ«å˜å¼‚å‚æ•°
   - æ ¼å¼ï¼š
     - å•å‚æ•°å˜å¼‚ï¼š`epochs`, `learning_rate`, `dropout` ç­‰
     - æ— å˜å¼‚ï¼šç©ºå­—ç¬¦ä¸²
     - å¤šå‚æ•°å˜å¼‚ï¼š`MULTIPLE:[epochs,lr,dropout]` (è®°å½•ä½†æ ‡è®°å¼‚å¸¸)

3. **é»˜è®¤è¶…å‚æ•°å¡«å……**
   - ä» `mutation/models_config.json` è¯»å–é»˜è®¤å€¼
   - åªå¡«å……ç©ºå€¼åˆ—ï¼Œä¸è¦†ç›–å·²æœ‰æ•°æ®

---

## ğŸ” æ•°æ®å¤‡ä»½æ£€æŸ¥

æ£€æŸ¥äº†ç°æœ‰å¤‡ä»½ï¼š
- **å½“å‰CSV**: 476è¡Œ
- **æœ€æ–°å¤‡ä»½** (`backup_20251211_144013`): 518è¡Œ
- **å·®å¼‚**: 42è¡Œ (VulBERTa/cnnå·²æ¸…ç†)
- **ç»“è®º**: å½“å‰CSVæ˜¯å¤‡ä»½çš„å­é›†ï¼Œå…¬å…±æ•°æ®ä¸€è‡´
- **å†³å®š**: **æ— éœ€é‡å¤å¤‡ä»½** âœ…

---

## ğŸš€ è„šæœ¬å®ç°

### æ–‡ä»¶ä½ç½®
```
scripts/fix_csv_null_values.py
```

### åŠŸèƒ½ç‰¹æ€§
1. âœ… ä»ç›®å½•åæ¨æ–­ `experiment_source`
2. âœ… æ™ºèƒ½è¯†åˆ«å˜å¼‚å‚æ•° (æ–°å¢ `mutated_param` åˆ—)
3. âœ… å¡«å……é»˜è®¤è¶…å‚æ•°
4. âœ… Dry-runæ¨¡å¼é¢„è§ˆ
5. âœ… è¯¦ç»†æ—¥å¿—è¾“å‡º
6. âœ… ç»Ÿè®¡æŠ¥å‘Š

---

## ğŸ“Š Dry-runæµ‹è¯•ç»“æœ

```bash
python3 scripts/fix_csv_null_values.py --dry-run
```

### æµ‹è¯•ç»“æœ
```
âœ“ æ€»è¡Œæ•°: 476
âœ“ ä¿®å¤experiment_source: 0è¡Œ (å·²ç»æ­£ç¡®)
âœ“ æ·»åŠ mutated_param: 416è¡Œ
âœ“ å¡«å……é»˜è®¤è¶…å‚æ•°: 1228ä¸ªå€¼
âœ“ å‘ç°1ä¸ªå¤šå‚æ•°å˜å¼‚ (æ ‡è®°ä¸ºMULTIPLE)
```

### è¾“å‡ºç¤ºä¾‹
```
[50/476] mutation_1x__MRT-OAST_default_036
  mutated_param: weight_decay
  å¡«å……äº† 4 ä¸ªé»˜è®¤è¶…å‚æ•°

[200/476] mutation_2x_safe__Person_reID_baseline_pytorch_densenet121_118
  mutated_param: dropout
  å¡«å……äº† 2 ä¸ªé»˜è®¤è¶…å‚æ•°

[400/476] Person_reID_baseline_pytorch_densenet121_012
  mutated_param: MULTIPLE:[epochs,learning_rate,dropout]
```

---

## âœ… æ‰§è¡Œå»ºè®®

### 1. é¢„è§ˆæ¨¡å¼ï¼ˆå·²å®Œæˆï¼‰
```bash
python3 scripts/fix_csv_null_values.py --dry-run
```
**çŠ¶æ€**: âœ… å·²æµ‹è¯•ï¼Œè¾“å‡ºæ­£å¸¸

### 2. å®é™…æ‰§è¡Œï¼ˆå¾…ç”¨æˆ·ç¡®è®¤ï¼‰
```bash
python3 scripts/fix_csv_null_values.py
```
**è¯´æ˜**:
- æ— éœ€å¤‡ä»½ï¼ˆå·²æœ‰å¤‡ä»½ä¸”å…¬å…±æ•°æ®ä¸€è‡´ï¼‰
- ä¿®æ”¹åŸCSVæ–‡ä»¶
- æ–°å¢ `mutated_param` åˆ—
- å¡«å……é»˜è®¤è¶…å‚æ•°å€¼

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### CSVå˜åŒ–
- **è¡Œæ•°**: 476 (ä¸å˜)
- **åˆ—æ•°**: 37 â†’ 38 (æ–°å¢mutated_param)
- **æ•°æ®å®Œæ•´æ€§**: æ— ä¸¢å¤±

### ç©ºå€¼æ”¹å–„
| åˆ—å | ä¿®å¤å‰ç©ºå€¼ | ä¿®å¤åç©ºå€¼ | æ”¹å–„ |
|-----|----------|----------|-----|
| `mutated_param` | N/A (æ–°åˆ—) | ~60è¡Œ | æ–°å¢416ä¸ªæœ‰æ•ˆå€¼ |
| å„è¶…å‚æ•°åˆ— | ~70-90% | ~65-85% | å¡«å……1228ä¸ªé»˜è®¤å€¼ |

---

## âš ï¸ ç‰¹æ®Šæƒ…å†µ

### 1. å¤šå‚æ•°å˜å¼‚
```
[400/476] Person_reID_baseline_pytorch_densenet121_012
  mutated_param: MULTIPLE:[epochs,learning_rate,dropout]
```
- å‘ç°ï¼š1ä¸ªå®éªŒåŒæ—¶å˜å¼‚3ä¸ªå‚æ•°
- å¤„ç†ï¼šæ ‡è®°ä¸º `MULTIPLE:[...]`ï¼Œéœ€äººå·¥æ£€æŸ¥

### 2. æ— æ³•è¯†åˆ«å˜å¼‚
- å°‘æ•°å®éªŒï¼ˆçº¦60ä¸ªï¼‰æ— æ³•æ˜ç¡®è¯†åˆ«å˜å¼‚å‚æ•°
- å¯èƒ½åŸå› ï¼šé»˜è®¤é…ç½®åæ¥è¢«æ›´æ–°
- å¤„ç†ï¼š`mutated_param` ä¸ºç©ºï¼Œä¿æŒç°çŠ¶

---

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### æŸ¥çœ‹å¸®åŠ©
```bash
python3 scripts/fix_csv_null_values.py --help
```

### é¢„è§ˆæ¨¡å¼
```bash
python3 scripts/fix_csv_null_values.py --dry-run
```

### å®é™…æ‰§è¡Œ
```bash
python3 scripts/fix_csv_null_values.py
```

### è‡ªå®šä¹‰è·¯å¾„
```bash
python3 scripts/fix_csv_null_values.py \
    --input results/summary_all.csv \
    --config mutation/models_config.json
```

---

## ğŸ“Œ åç»­å»ºè®®

1. **æ‰§è¡Œä¿®å¤**
   ```bash
   python3 scripts/fix_csv_null_values.py
   ```

2. **éªŒè¯ç»“æœ**
   ```bash
   # æ£€æŸ¥åˆ—æ•°
   head -1 results/summary_all.csv | tr ',' '\n' | wc -l
   # åº”è¾“å‡º: 38

   # æ£€æŸ¥è¡Œæ•°
   wc -l results/summary_all.csv
   # åº”è¾“å‡º: 477 (476 + header)
   ```

3. **æ€§èƒ½æŒ‡æ ‡æå–** (åç»­ä»»åŠ¡)
   - ä»è®­ç»ƒæ—¥å¿—æå–ç¼ºå¤±çš„æ€§èƒ½æŒ‡æ ‡
   - å…è®¸åˆç†ç©ºå€¼å­˜åœ¨

---

**ç»´æŠ¤è€…**: Claude + Green
**å®¡æ ¸çŠ¶æ€**: å¾…ç”¨æˆ·ç¡®è®¤
**å®ç°çŠ¶æ€**: âœ… å·²å®ç°å¹¶æµ‹è¯•é€šè¿‡
**æ‰§è¡Œå»ºè®®**: å¯ä»¥å®‰å…¨æ‰§è¡Œ
